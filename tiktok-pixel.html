<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Pixel</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:#0a0a0a;min-height:100vh;color:#fff}
.gold{background:linear-gradient(135deg,#b8860b,#ffd700,#b8860b);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header{padding:30px 40px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(184,134,11,0.2)}
.logo{display:flex;align-items:center;gap:20px}
.logo-icon{width:60px;height:60px;border:2px solid #b8860b;border-radius:15px;display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:28px;font-weight:700;color:#ffd700;background:rgba(184,134,11,0.1)}
.logo h1{font-family:'Playfair Display',serif;font-size:28px;font-weight:600;letter-spacing:1px}
.back-btn{background:transparent;border:1px solid rgba(255,255,255,0.2);color:#999;padding:14px 28px;font-size:13px;letter-spacing:1px;text-transform:uppercase;cursor:pointer;transition:all 0.4s ease}
.back-btn:hover{border-color:#b8860b;color:#ffd700}
.main{max-width:700px;margin:0 auto;padding:50px 30px}
.section-title{font-family:'Playfair Display',serif;font-size:14px;letter-spacing:3px;text-transform:uppercase;color:#b8860b;margin-bottom:25px;display:flex;align-items:center;gap:20px}
.section-title::before,.section-title::after{content:"";flex:1;height:1px;background:linear-gradient(90deg,transparent,rgba(184,134,11,0.3),transparent)}
.status-hero{text-align:center;padding:50px 30px;margin-bottom:50px;border:1px solid rgba(184,134,11,0.2);background:linear-gradient(180deg,rgba(184,134,11,0.05) 0%,transparent 100%)}
.status-icon{font-size:60px;margin-bottom:20px}
.status-title{font-family:'Playfair Display',serif;font-size:32px;font-weight:600;margin-bottom:10px;letter-spacing:2px}
.status-desc{font-size:14px;color:#666;letter-spacing:1px}
.table-wrap{margin-bottom:50px}
.table-row{display:grid;grid-template-columns:1fr 120px 1.5fr;gap:20px;padding:20px 25px;border-bottom:1px solid rgba(255,255,255,0.05);align-items:center;transition:all 0.3s}
.table-row:hover{background:rgba(184,134,11,0.03)}
.table-row:last-child{border-bottom:none}
.row-title{font-size:14px;font-weight:500;letter-spacing:0.5px}
.row-desc{font-size:12px;color:#555;letter-spacing:0.3px}
.badge{padding:6px 14px;font-size:11px;letter-spacing:1px;text-transform:uppercase;border:1px solid;background:transparent}
.badge-off{color:#ff4757;border-color:rgba(255,71,87,0.3)}
.badge-wait{color:#666;border-color:rgba(255,255,255,0.1)}
.badge-on{color:#2ed573;border-color:rgba(46,213,115,0.3)}
.badge-info{color:#b8860b;border-color:rgba(184,134,11,0.3)}
.card{border:1px solid rgba(184,134,11,0.2);padding:40px;margin-bottom:30px;background:linear-gradient(180deg,rgba(184,134,11,0.03) 0%,transparent 100%)}
.card-title{font-family:'Playfair Display',serif;font-size:18px;font-weight:600;margin-bottom:30px;letter-spacing:1px;color:#ffd700}
.input-group{margin-bottom:25px}
.input-group label{display:block;font-size:11px;letter-spacing:2px;text-transform:uppercase;color:#666;margin-bottom:12px}
.input-group label .required{color:#ff4757;margin-left:5px}
.input-group input{width:100%;padding:18px 20px;background:#111;border:1px solid rgba(255,255,255,0.1);color:#fff;font-size:16px;letter-spacing:1px;transition:all 0.4s}
.input-group input:focus{outline:none;border-color:#b8860b;box-shadow:0 0 30px rgba(184,134,11,0.1)}
.input-group input::placeholder{color:#333}
.input-hint{font-size:11px;color:#444;margin-top:10px;letter-spacing:0.3px;line-height:1.6}
.input-hint a{color:#b8860b;text-decoration:none}
.input-hint a:hover{text-decoration:underline}
.divider{height:1px;background:linear-gradient(90deg,transparent,rgba(184,134,11,0.3),transparent);margin:30px 0}
.toggle-item{display:flex;align-items:center;justify-content:space-between;padding:20px 0;border-bottom:1px solid rgba(255,255,255,0.05)}
.toggle-item:last-child{border-bottom:none}
.toggle-label{font-size:14px;font-weight:500}
.toggle-label span{display:block;font-size:11px;color:#555;margin-top:5px;font-weight:400}
.toggle-switch{width:50px;height:26px;background:#222;border-radius:13px;position:relative;cursor:pointer;transition:all 0.3s}
.toggle-switch::after{content:"";position:absolute;width:20px;height:20px;background:#444;border-radius:50%;top:3px;left:3px;transition:all 0.3s}
.toggle-switch.active{background:linear-gradient(90deg,#b8860b,#ffd700)}
.toggle-switch.active::after{left:27px;background:#fff}
.event-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-top:20px}
.event-card{padding:20px;border:1px solid rgba(255,255,255,0.1);cursor:pointer;transition:all 0.3s;user-select:none}
.event-card:hover{border-color:rgba(184,134,11,0.5)}
.event-card.active{border-color:#b8860b;background:rgba(184,134,11,0.1)}
.event-card.active .event-check{background:#b8860b;border-color:#b8860b}
.event-card.active .event-check::after{opacity:1}
.event-header{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.event-check{width:20px;height:20px;border:2px solid #333;border-radius:4px;position:relative;transition:all 0.3s}
.event-check::after{content:"";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;opacity:0;transition:opacity 0.3s}
.event-name{font-size:14px;font-weight:600}
.event-desc{font-size:11px;color:#555;line-height:1.5}
.btn-row{display:flex;gap:20px;margin-top:40px}
.btn{flex:1;padding:18px;font-size:12px;letter-spacing:2px;text-transform:uppercase;border:none;cursor:pointer;transition:all 0.4s}
.btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.2);color:#666}
.btn-outline:hover{border-color:#fff;color:#fff}
.btn-gold{background:linear-gradient(90deg,#b8860b,#ffd700);color:#000;font-weight:600}
.btn-gold:hover{box-shadow:0 10px 40px rgba(184,134,11,0.3);transform:translateY(-2px)}
.footer-link{display:block;text-align:center;margin-top:40px;font-size:12px;letter-spacing:2px;color:#444;text-decoration:none;text-transform:uppercase;transition:color 0.3s}
.footer-link:hover{color:#b8860b}
.info-banner{display:flex;align-items:flex-start;gap:20px;padding:25px 30px;border:1px solid rgba(184,134,11,0.2);background:rgba(184,134,11,0.02);margin-bottom:40px}
.info-banner-icon{font-size:28px;flex-shrink:0}
.info-banner-text{font-size:13px;color:#888;line-height:1.7;letter-spacing:0.3px}
.info-banner-text strong{color:#ffd700}
.help-box{background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.05);padding:20px;margin-top:20px}
.help-box-title{font-size:12px;font-weight:600;color:#b8860b;margin-bottom:12px;letter-spacing:1px}
.help-box ol{font-size:12px;color:#666;line-height:2;padding-left:20px}
.help-box ol a{color:#b8860b}
.toast{position:fixed;bottom:40px;left:50%;transform:translateX(-50%) translateY(100px);background:linear-gradient(90deg,#b8860b,#ffd700);color:#000;padding:16px 40px;font-size:12px;letter-spacing:2px;text-transform:uppercase;font-weight:600;transition:transform 0.5s cubic-bezier(0.68,-0.55,0.265,1.55);z-index:1000}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:600px){
.header{padding:20px;flex-direction:column;gap:20px}
.main{padding:30px 20px}
.table-row{grid-template-columns:1fr 100px}
.row-desc{display:none}
.btn-row{flex-direction:column}
.card{padding:25px}
.event-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header class="header">
<div class="logo">
<div class="logo-icon">T</div>
<h1 class="gold">TikTok Pixel</h1>
</div>
<button class="back-btn" onclick="location.href='ana-sayfa.html'"> Geri Dön</button>
</header>

<main class="main">

<div class="status-hero" id="statusHero">
<div class="status-icon" id="statusIcon"></div>
<h2 class="status-title gold" id="statusTitle">Pixel Pasif</h2>
<p class="status-desc" id="statusDesc">Yapılandırma bekleniyor</p>
</div>

<div class="info-banner">
<div class="info-banner-icon"></div>
<div class="info-banner-text">
<strong>TikTok Pixel Nedir?</strong><br>
Web sitenizdeki ziyaretçi davranışlarını takip eder. TikTok reklamlarınızı optimize etmenizi sağlar. Pixel ID girip aktif ettiğinizde veriler TikTok'a gönderilmeye başlar.
</div>
</div>

<div class="section-title">Sistem Durumu</div>
<div class="table-wrap">
<div class="table-row">
<div class="row-title">Pixel ID</div>
<div><span class="badge badge-off" id="badgePixelId">Girilmedi</span></div>
<div class="row-desc">TikTok Ads Manager'dan alınır</div>
</div>
<div class="table-row">
<div class="row-title">Pixel Durumu</div>
<div><span class="badge badge-off" id="badgePixelActive">Pasif</span></div>
<div class="row-desc">Veri toplama durumu</div>
</div>
<div class="table-row">
<div class="row-title">Aktif Eventler</div>
<div><span class="badge badge-wait" id="badgeEvents">0 Event</span></div>
<div class="row-desc">Takip edilen kullanıcı aksiyonları</div>
</div>
</div>

<div class="card">
<h3 class="card-title">Pixel Yapılandırması</h3>

<div class="input-group">
<label>TikTok Pixel ID <span class="required">*</span></label>
<input type="text" id="pixelId" placeholder="CXXXXXXXXXXXXXXXXX" oninput="updateStatus()">
<div class="input-hint">
TikTok Ads Manager'dan alınan Pixel ID.<br>
<a href="https://ads.tiktok.com" target="_blank">TikTok Ads Manager'ı Aç </a>
</div>
</div>

<div class="help-box">
<div class="help-box-title">Pixel ID Nasıl Alınır?</div>
<ol>
<li><a href="https://ads.tiktok.com" target="_blank">TikTok Ads Manager</a>'a git</li>
<li>Assets  Events  Web Events</li>
<li>Pixel oluştur veya mevcut olanı seç</li>
<li>Pixel ID'yi kopyala</li>
</ol>
</div>

<div class="divider"></div>

<div class="toggle-item">
<div class="toggle-label">Pixel Aktif<span>Veri toplamayı başlat</span></div>
<div class="toggle-switch" id="switchActive" onclick="toggleSwitch('active')"></div>
</div>
</div>

<div class="card">
<h3 class="card-title">Takip Edilecek Eventler</h3>
<p style="font-size:12px;color:#666;margin-bottom:20px;line-height:1.6">Hangi kullanıcı aksiyonlarını takip etmek istediğinizi seçin.</p>

<div class="event-grid">
<div class="event-card" data-event="PageView" onclick="toggleEvent(this)">
<div class="event-header">
<div class="event-check"></div>
<div class="event-name">PageView</div>
</div>
<div class="event-desc">Sayfa görüntülendiğinde tetiklenir.</div>
</div>

<div class="event-card" data-event="ViewContent" onclick="toggleEvent(this)">
<div class="event-header">
<div class="event-check"></div>
<div class="event-name">ViewContent</div>
</div>
<div class="event-desc">Ürün sayfası görüntülendiğinde.</div>
</div>

<div class="event-card" data-event="SubmitForm" onclick="toggleEvent(this)">
<div class="event-header">
<div class="event-check"></div>
<div class="event-name">SubmitForm</div>
</div>
<div class="event-desc">Sipariş formu gönderildiğinde.</div>
</div>

<div class="event-card" data-event="CompletePayment" onclick="toggleEvent(this)">
<div class="event-header">
<div class="event-check"></div>
<div class="event-name">CompletePayment</div>
</div>
<div class="event-desc">Satın alma tamamlandığında.</div>
</div>
</div>
</div>

<div class="btn-row">
<button class="btn btn-outline" onclick="resetAll()">Sıfırla</button>
<button class="btn btn-gold" onclick="saveAll()">Kaydet</button>
</div>

<a href="https://ads.tiktok.com" target="_blank" class="footer-link">TikTok Ads Manager </a>

</main>

<div class="toast" id="toast"></div>

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
}(window, document, 'ttq');

var settings = {
pixelId: '',
active: false,
events: []
};

window.onload = function(){
loadSettings();
};

function loadSettings(){
var saved = localStorage.getItem('tiktok_pixel_settings');
if(saved){
settings = JSON.parse(saved);
document.getElementById('pixelId').value = settings.pixelId || '';

if(settings.active) document.getElementById('switchActive').classList.add('active');

var cards = document.querySelectorAll('.event-card');
cards.forEach(function(card){
if(settings.events.indexOf(card.dataset.event) > -1){
card.classList.add('active');
}
});
}
updateStatus();
initializeTikTokPixel();
}

function initializeTikTokPixel(){
if(settings.pixelId && settings.active){
// TikTok Pixel'i başlat
ttq.load(settings.pixelId);
ttq.page();
console.log('TikTok Pixel initialized with ID:', settings.pixelId);
}
}

function toggleSwitch(type){
var el = document.getElementById('switchActive');
el.classList.toggle('active');
settings.active = el.classList.contains('active');
updateStatus();
}

function toggleEvent(el){
el.classList.toggle('active');
var ev = el.dataset.event;
var idx = settings.events.indexOf(ev);
if(idx > -1){
settings.events.splice(idx, 1);
}else{
settings.events.push(ev);
}
updateStatus();
}

function updateStatus(){
var pixelId = document.getElementById('pixelId').value.trim();
settings.pixelId = pixelId;

var badgePixelId = document.getElementById('badgePixelId');
var badgePixelActive = document.getElementById('badgePixelActive');
var badgeEvents = document.getElementById('badgeEvents');

if(pixelId && pixelId.length >= 10){
badgePixelId.className = 'badge badge-on';
badgePixelId.textContent = 'Girildi ';
}else if(pixelId){
badgePixelId.className = 'badge badge-info';
badgePixelId.textContent = 'Eksik';
}else{
badgePixelId.className = 'badge badge-off';
badgePixelId.textContent = 'Girilmedi';
}

if(settings.active && pixelId && pixelId.length >= 10){
badgePixelActive.className = 'badge badge-on';
badgePixelActive.textContent = 'Aktif ';
}else{
badgePixelActive.className = 'badge badge-off';
badgePixelActive.textContent = 'Pasif';
}

var eventCount = settings.events.length;
if(eventCount > 0){
badgeEvents.className = 'badge badge-on';
badgeEvents.textContent = eventCount + ' Event ';
}else{
badgeEvents.className = 'badge badge-wait';
badgeEvents.textContent = '0 Event';
}

var icon = document.getElementById('statusIcon');
var title = document.getElementById('statusTitle');
var desc = document.getElementById('statusDesc');

if(!pixelId || pixelId.length < 10){
icon.textContent = '';
title.textContent = 'Pixel Pasif';
desc.textContent = 'Geçerli Pixel ID girilmedi';
}else if(!settings.active){
icon.textContent = '';
title.textContent = 'Pixel Hazır';
desc.textContent = 'Aktif edilmeyi bekliyor';
}else{
icon.textContent = '';
title.textContent = 'Pixel Aktif';
desc.textContent = 'Veriler TikTok\'a gönderiliyor';
}
}

function saveAll(){
var pixelId = document.getElementById('pixelId').value.trim();

if(settings.active && (!pixelId || pixelId.length < 10)){
showToast(' Geçerli Pixel ID gerekli!');
return;
}

settings.pixelId = pixelId;
localStorage.setItem('tiktok_pixel_settings', JSON.stringify(settings));
showToast(' Ayarlar Kaydedildi');
updateStatus();
initializeTikTokPixel();
}

function trackEvent(eventName, parameters = {}){
if(settings.active && settings.pixelId && settings.events.indexOf(eventName) > -1){
ttq.track(eventName, parameters);
console.log('TikTok Event tracked:', eventName, parameters);
}
}

// Global fonksiyonlar - diğer sayfalarda kullanılabilir
window.trackTikTokPageView = function(){
trackEvent('PageView');
};

window.trackTikTokViewContent = function(contentId, contentType){
trackEvent('ViewContent', {
content_id: contentId,
content_type: contentType
});
};

window.trackTikTokSubmitForm = function(){
trackEvent('SubmitForm');
};

window.trackTikTokCompletePayment = function(value, currency = 'TRY'){
trackEvent('CompletePayment', {
value: value,
currency: currency
});
};

function resetAll(){
if(confirm('Tüm TikTok Pixel ayarları sıfırlansın mı?')){
localStorage.removeItem('tiktok_pixel_settings');
location.reload();
}
}

function showToast(msg){
var t = document.getElementById('toast');
t.textContent = msg;
t.classList.add('show');
setTimeout(function(){ t.classList.remove('show'); }, 2500);
}
</script>
</body>
</html>
