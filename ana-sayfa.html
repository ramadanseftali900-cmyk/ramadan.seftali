<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Site</title>
<link rel="stylesheet" href="uygulamalar/ana-sayfa.css">
<link rel="stylesheet" href="uygulamalar/ses-paneli.css">
<style>
html,body{margin:0;padding:0}
#topBar{position:fixed;top:-160px;left:0;right:0;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);padding:10px 15px;border-bottom:none;z-index:998;transition:top 0.3s ease}
#topBar.acik{top:0}
#drawerButtons{display:flex;gap:8px;flex-wrap:nowrap;justify-content:space-between;align-items:center;width:100%}
.drawerBtn{color:#fff;border:none;padding:0 12px;border-radius:10px;font-weight:700;cursor:pointer;font-size:12px;flex:1;text-align:center;display:flex;align-items:center;justify-content:center;gap:6px;transition:all 0.2s ease;box-shadow:0 3px 10px rgba(0,0,0,0.3);white-space:nowrap;height:50px}
.drawerBtn:hover{transform:translateY(-2px);box-shadow:0 5px 12px rgba(0,0,0,0.4)}
.ledIsik{width:10px;height:10px;border-radius:50%;display:inline-block;margin-left:8px}
.ledKapali{background:#555;box-shadow:none}
.ledAcik{background:#0f0;box-shadow:0 0 10px #0f0}
#sayfaKontrolBar{display:flex;gap:8px;margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,0.1);flex-wrap:wrap;justify-content:center}
.sayfaToggle{display:flex;align-items:center;gap:6px;background:rgba(0,0,0,0.3);padding:6px 12px;border-radius:8px;font-size:11px;color:#fff;font-weight:bold}
.sayfaToggle span{white-space:nowrap}
.toggleSwitch{width:40px;height:22px;background:#dc3545;border-radius:11px;position:relative;cursor:pointer;transition:background 0.3s}
.toggleSwitch.acik{background:#28a745}
.toggleSwitch::after{content:'';position:absolute;width:18px;height:18px;background:#fff;border-radius:50%;top:2px;left:2px;transition:left 0.3s}
.toggleSwitch.acik::after{left:20px}
#okBtn{position:fixed;top:0;right:20px;z-index:999;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);color:#fff;border:none;padding:8px 20px;border-radius:0 0 10px 10px;cursor:pointer;font-size:16px;font-weight:bold;transition:top 0.3s ease;box-shadow:0 3px 10px rgba(0,0,0,0.3)}
#okBtn.acik{top:125px}
#okBtn:hover{background:linear-gradient(135deg,#16213e 0%,#1a1a2e 100%)}
#adminBtn{position:fixed;top:200px;right:0;z-index:999;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);color:#fff;border:none;padding:8px 20px;border-radius:10px 0 0 10px;cursor:pointer;font-size:14px;font-weight:bold;transition:top 0.3s ease;box-shadow:0 3px 10px rgba(0,0,0,0.3)}
#adminBtn.acik{top:210px}
#adminBtn:hover{background:linear-gradient(135deg,#16213e 0%,#1a1a2e 100%)}
#urlBtn{position:fixed;top:160px;right:0;z-index:999;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);color:#fff;border:none;padding:8px 20px;border-radius:10px 0 0 10px;cursor:pointer;font-size:14px;font-weight:bold;box-shadow:0 3px 10px rgba(0,0,0,0.3)}
#urlBtn:hover{background:linear-gradient(135deg,#16213e 0%,#1a1a2e 100%)}
#urlDrawer{position:fixed;left:-320px;top:125px;width:300px;height:calc(100vh - 125px);background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);z-index:997;transition:left 0.3s ease;box-shadow:3px 0 15px rgba(0,0,0,0.5);overflow:hidden;display:flex;flex-direction:column}
#urlDrawer.acik{left:0}
.urlDrawerHeader{background:rgba(0,0,0,0.3);padding:20px;text-align:center;font-size:18px;font-weight:bold;color:#fff;border-bottom:1px solid rgba(255,255,255,0.1);flex-shrink:0}
.urlDrawerContent{padding:15px;overflow-y:auto;flex:1}
.urlItem{margin-bottom:20px}
.urlItemTitle{color:#fff;font-weight:bold;font-size:14px;margin-bottom:8px}
.urlItemBox{background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:8px;padding:10px;color:#fff;font-size:12px;word-break:break-all;margin-bottom:8px}
.urlCopyBtn{background:#28a745;color:#fff;border:none;padding:8px 15px;border-radius:5px;cursor:pointer;font-size:12px;font-weight:bold;width:100%}
.urlCopyBtn:hover{background:#218838}
.toastMsg{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0.8);background:#28a745;color:#fff;padding:15px 30px;border-radius:10px;font-size:16px;font-weight:bold;z-index:9999;opacity:0;transition:all 0.3s ease;box-shadow:0 5px 20px rgba(40,167,69,0.4)}
.toastMsg.show{opacity:1;transform:translate(-50%,-50%) scale(1)}
</style>
</head>
<body>
<div id="topBar">
<div id="drawerButtons">
<button class="drawerBtn" style="background:#000" onclick="window.location.href='tiktok-pixel.html'">TikTok Pixel</button>
<button class="drawerBtn" style="background:#0095F6" onclick="window.location.href='meta-pixel.html'">Meta Pixel</button>
<button class="drawerBtn" style="background:#96bf3d" onclick="window.location.href='shopify-ayarlar.html'">ğŸ›’ Shopify</button>
<button class="drawerBtn" style="background:#9C27B0" onclick="window.location.href='domain-bagla.html'">Domain BaÄŸla</button>
<button class="drawerBtn" style="background:#FFC107;color:#000" onclick="window.location.href='muhasebeci.html'">MUHASEBE</button>
<button class="drawerBtn" style="background:#1B5E20" onclick="window.location.href='gelen-fatura.html'">Gelen Faturalar</button>
<button class="drawerBtn" style="background:#00008B" onclick="window.location.href='fatura-gonder.html'">Fatura GÃ¶nder</button>
<button class="drawerBtn" style="background:#FF8C00" onclick="window.location.href='kargo-gonder.html'">Kargo GÃ¶nder</button>
<button class="drawerBtn" style="background:#1B5E20" onclick="window.location.href='siparis-takibi.html'">SipariÅŸ Takibi</button>
<button class="drawerBtn" style="background:#2C3E50" onclick="window.location.href='otomasyon.html'">Otomasyon</button>
<button class="drawerBtn" style="background:#e94560" onclick="window.location.href='ramco.html'">ğŸ¤– YAPAY ZEKA</button>
</div>
<!-- SAYFA KONTROL BÃ–LÃœMÃœ -->
<div id="sayfaKontrolBar">
<div class="sayfaToggle"><span>ÃœRÃœN 1</span><div class="toggleSwitch acik" id="toggle1" onclick="sayfaToggle(1)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 2</span><div class="toggleSwitch acik" id="toggle2" onclick="sayfaToggle(2)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 3</span><div class="toggleSwitch acik" id="toggle3" onclick="sayfaToggle(3)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 4</span><div class="toggleSwitch acik" id="toggle4" onclick="sayfaToggle(4)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 5</span><div class="toggleSwitch acik" id="toggle5" onclick="sayfaToggle(5)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 6</span><div class="toggleSwitch acik" id="toggle6" onclick="sayfaToggle(6)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 7</span><div class="toggleSwitch acik" id="toggle7" onclick="sayfaToggle(7)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 8</span><div class="toggleSwitch acik" id="toggle8" onclick="sayfaToggle(8)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 9</span><div class="toggleSwitch acik" id="toggle9" onclick="sayfaToggle(9)"></div></div>
<div class="sayfaToggle"><span>ÃœRÃœN 10</span><div class="toggleSwitch acik" id="toggle10" onclick="sayfaToggle(10)"></div></div>
</div>
</div>
<button id="okBtn" onclick="cekmeceAcKapa()">â†“</button>
<button id="urlBtn" onclick="urlCekmeceAcKapa()">URL</button>
<button id="adminBtn" onclick="localStorage.setItem('admin_giris','true'); window.location.href='urun-1.html'">ADMIN</button>

<!-- URL SOL Ã‡EKMECESÄ° -->
<div id="urlDrawer">
<div class="urlDrawerHeader">ğŸ“‹ ÃœRÃœN URL'LERÄ°</div>
<div class="urlDrawerContent">
<!-- WHATSAPP NUMARASI BÃ–LÃœMÃœ -->
<div style="background:rgba(37,211,102,0.1);border:2px solid #25d366;border-radius:10px;padding:15px;margin-bottom:20px">
<div style="color:#25d366;font-weight:bold;font-size:14px;margin-bottom:10px;display:flex;align-items:center;gap:8px">ğŸ’¬ WhatsApp NumarasÄ±</div>
<input type="tel" id="whatsappNumara" placeholder="5XX XXX XX XX" style="width:calc(100% - 22px);padding:10px;border:1px solid #25d366;border-radius:8px;background:rgba(0,0,0,0.3);color:#fff;font-size:14px;margin-bottom:10px;box-sizing:border-box" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
<div style="display:flex;gap:8px">
<button onclick="whatsappKaydet()" style="flex:1;background:#25d366;color:#fff;border:none;padding:10px;border-radius:5px;cursor:pointer;font-weight:bold;font-size:12px">ğŸ’¾ KAYDET</button>
<button onclick="whatsappSil()" style="flex:1;background:#dc3545;color:#fff;border:none;padding:10px;border-radius:5px;cursor:pointer;font-weight:bold;font-size:12px">ğŸ—‘ï¸ SÄ°L</button>
</div>
<div id="whatsappDurum" style="margin-top:8px;font-size:11px;color:#888;text-align:center"></div>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 1</div>
<div class="urlItemBox" id="url1">kargonburada.online/urun-1.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url1')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 2</div>
<div class="urlItemBox" id="url2">kargonburada.online/urun-2.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url2')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 3</div>
<div class="urlItemBox" id="url3">kargonburada.online/urun-3.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url3')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 4</div>
<div class="urlItemBox" id="url4">kargonburada.online/urun-4.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url4')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 5</div>
<div class="urlItemBox" id="url5">kargonburada.online/urun-5.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url5')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 6</div>
<div class="urlItemBox" id="url6">kargonburada.online/urun-6.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url6')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 7</div>
<div class="urlItemBox" id="url7">kargonburada.online/urun-7.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url7')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 8</div>
<div class="urlItemBox" id="url8">kargonburada.online/urun-8.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url8')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 9</div>
<div class="urlItemBox" id="url9">kargonburada.online/urun-9.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url9')">KOPYALA</button>
</div>
<div class="urlItem">
<div class="urlItemTitle">ÃœRÃœN 10</div>
<div class="urlItemBox" id="url10">kargonburada.online/urun-10.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('url10')">KOPYALA</button>
</div>
<div class="urlItem" style="margin-top:20px;padding-top:20px;border-top:2px solid rgba(233,69,96,0.5)">
<div class="urlItemTitle" style="color:#e94560">ğŸ” ADMÄ°N GÄ°RÄ°Å</div>
<div class="urlItemBox" id="urlAdmin" style="background:rgba(233,69,96,0.2);border-color:rgba(233,69,96,0.5)">kargonburada.online/admin.html</div>
<button class="urlCopyBtn" onclick="kopyalaUrl('urlAdmin')" style="background:#e94560">KOPYALA</button>
</div>
</div>
</div>

<script>
function cekmeceAcKapa(){
  var topBar = document.getElementById('topBar');
  var okBtn = document.getElementById('okBtn');
  if(topBar.classList.contains('acik')){
    topBar.classList.remove('acik');
    okBtn.classList.remove('acik');
    okBtn.textContent = 'â†“';
  } else {
    topBar.classList.add('acik');
    okBtn.classList.add('acik');
    okBtn.textContent = 'â†‘';
  }
}

function urlCekmeceAcKapa(){
  var urlDrawer = document.getElementById('urlDrawer');
  if(urlDrawer.classList.contains('acik')){
    urlDrawer.classList.remove('acik');
  } else {
    urlDrawer.classList.add('acik');
  }
}

function kopyalaUrl(id){
  var urlText = document.getElementById(id).textContent;
  navigator.clipboard.writeText('https://' + urlText).then(function(){
    // Toast mesajÄ± gÃ¶ster
    var toast = document.createElement('div');
    toast.className = 'toastMsg';
    toast.innerHTML = 'âœ“ KopyalandÄ±!';
    document.body.appendChild(toast);
    setTimeout(function(){ toast.classList.add('show'); }, 10);
    setTimeout(function(){
      toast.classList.remove('show');
      setTimeout(function(){ toast.remove(); }, 300);
    }, 1500);
  });
}

// WhatsApp numara kaydet/sil
function whatsappKaydet() {
  var numara = document.getElementById('whatsappNumara').value.trim();
  if(numara) {
    // Sadece rakamlarÄ± al
    numara = numara.replace(/\D/g, '');
    // TÃ¼rkiye kodu ekle
    if(numara.startsWith('0')) numara = '90' + numara.substring(1);
    else if(!numara.startsWith('90')) numara = '90' + numara;
    
    localStorage.setItem('whatsapp_numara', numara);
    document.getElementById('whatsappDurum').innerHTML = 'âœ… Kaydedildi: +' + numara;
    document.getElementById('whatsappDurum').style.color = '#25d366';
  } else {
    document.getElementById('whatsappDurum').innerHTML = 'âš ï¸ Numara girin!';
    document.getElementById('whatsappDurum').style.color = '#ffc107';
  }
}

function whatsappSil() {
  localStorage.removeItem('whatsapp_numara');
  document.getElementById('whatsappNumara').value = '';
  document.getElementById('whatsappDurum').innerHTML = 'ğŸ—‘ï¸ Numara silindi';
  document.getElementById('whatsappDurum').style.color = '#dc3545';
}

function whatsappYukle() {
  var numara = localStorage.getItem('whatsapp_numara');
  if(numara) {
    document.getElementById('whatsappNumara').value = numara;
    document.getElementById('whatsappDurum').innerHTML = 'âœ… KayÄ±tlÄ±: +' + numara;
    document.getElementById('whatsappDurum').style.color = '#25d366';
  }
}

function urllerGuncelle() {
  var domain = window.location.hostname;
  if(domain === 'localhost' || domain === '127.0.0.1') {
    domain = 'localhost';
  }
  for(var i = 1; i <= 10; i++) {
    var urlEl = document.getElementById('url' + i);
    if(urlEl) urlEl.textContent = domain + '/urun-' + i + '.html';
  }
  var adminEl = document.getElementById('urlAdmin');
  if(adminEl) adminEl.textContent = domain + '/admin.html';
}

window.addEventListener('load', function() {
  whatsappYukle();
  urllerGuncelle();
});

function sayfaToggle(num){
  var toggle = document.getElementById('toggle' + num);
  var sayfaDurumu = JSON.parse(localStorage.getItem('sayfa_durumlari') || '{}');
  
  if(toggle.classList.contains('acik')){
    toggle.classList.remove('acik');
    sayfaDurumu['urun' + num] = false;
  } else {
    toggle.classList.add('acik');
    sayfaDurumu['urun' + num] = true;
  }
  localStorage.setItem('sayfa_durumlari', JSON.stringify(sayfaDurumu));
}

function sayfaDurumlariniYukle(){
  var sayfaDurumu = JSON.parse(localStorage.getItem('sayfa_durumlari') || '{}');
  for(var i = 1; i <= 10; i++){
    var toggle = document.getElementById('toggle' + i);
    if(toggle){
      if(sayfaDurumu['urun' + i] === false){
        toggle.classList.remove('acik');
      } else {
        toggle.classList.add('acik');
      }
    }
  }
}
window.addEventListener('load', sayfaDurumlariniYukle);
</script>
<div id="sifreModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:9999;justify-content:center;align-items:center">
<div style="background:#fff;padding:30px;border-radius:10px;text-align:center">
<h3 style="margin-bottom:15px;color:#000">Admin GiriÅŸi</h3>
<input type="password" id="sifreInput" placeholder="Åifre girin" style="padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;width:200px" onkeypress="if(event.keyCode==13)sifreGiris()">
<br><br>
<button onclick="sifreGiris()" style="background:#28a745;color:#fff;border:none;padding:10px 30px;border-radius:5px;cursor:pointer;font-size:14px">GiriÅŸ</button>
<button onclick="sifreKapat()" style="background:#dc3545;color:#fff;border:none;padding:10px 30px;border-radius:5px;cursor:pointer;font-size:14px;margin-left:10px">Ä°ptal</button>
</div>
</div>


<div id="mainPage">
<!-- SARAY DASHBOARD -->
<div style="background:linear-gradient(135deg,#0a0a0a 0%,#1a1a2e 50%,#16213e 100%);min-height:100vh;padding:20px;padding-top:30px;color:#fff;margin:0">

<!-- ÃœST BAR - CANLI -->
<div style="background:rgba(0,0,0,0.5);border:1px solid #28a745;border-radius:15px;padding:15px 25px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px">
<div style="display:flex;align-items:center;gap:15px">
<div id="onlineDot" style="width:16px;height:16px;background:#00ff00;border-radius:50%;animation:pulse 1.5s infinite;box-shadow:0 0 15px #00ff00"></div>
<span style="font-size:16px;font-weight:bold;color:#aaa">CANLI:</span>
<span id="onlineCount" style="font-size:42px;font-weight:900;color:#00ff00;text-shadow:0 0 20px #00ff00,0 0 40px #00ff00;animation:glowPulse 2s ease-in-out infinite">0</span>
<span style="font-size:16px;font-weight:bold;color:#aaa">kiÅŸi online</span>
</div>
<style>
@keyframes glowPulse {
  0%, 100% { text-shadow: 0 0 20px #00ff00, 0 0 40px #00ff00; }
  50% { text-shadow: 0 0 30px #00ff00, 0 0 60px #00ff00, 0 0 80px #00ff00; }
}
</style>
<div style="font-size:14px;color:#888" id="currentDateTime"></div>
</div>

<!-- ANA KARTLAR -->
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:25px">

<!-- BugÃ¼n ZiyaretÃ§i -->
<div class="dashCard" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:15px;padding:20px;text-align:center">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ‘¥ BUGÃœN ZÄ°YARETÃ‡Ä°</div>
<div id="todayVisitors" style="font-size:42px;font-weight:900">0</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">kiÅŸi girdi</div>
</div>

<!-- Toplam ZiyaretÃ§i -->
<div class="dashCard" style="background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);border-radius:15px;padding:20px;text-align:center">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ“Š TOPLAM ZÄ°YARETÃ‡Ä°</div>
<div id="totalVisitors" style="font-size:42px;font-weight:900">0</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">tÃ¼m zamanlar</div>
</div>

<!-- BugÃ¼n SipariÅŸ -->
<div class="dashCard" style="background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);border-radius:15px;padding:20px;text-align:center">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ›’ BUGÃœN SÄ°PARÄ°Å</div>
<div id="todayOrders" style="font-size:42px;font-weight:900">0</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">sipariÅŸ geldi</div>
</div>

<!-- Toplam SipariÅŸ -->
<div class="dashCard" style="background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);border-radius:15px;padding:20px;text-align:center">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ“¦ TOPLAM SÄ°PARÄ°Å</div>
<div id="totalOrders" style="font-size:42px;font-weight:900">0</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">tÃ¼m zamanlar</div>
</div>

<!-- BugÃ¼n Ciro -->
<div class="dashCard" style="background:linear-gradient(135deg,#fa709a 0%,#fee140 100%);border-radius:15px;padding:20px;text-align:center">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ’° BUGÃœN CÄ°RO</div>
<div id="todayRevenue" style="font-size:36px;font-weight:900">0â‚º</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">kazanÃ§</div>
</div>

<!-- DÃ¶nÃ¼ÅŸÃ¼m OranÄ± -->
<div class="dashCard" style="background:linear-gradient(135deg,#a8edea 0%,#fed6e3 100%);border-radius:15px;padding:20px;text-align:center;color:#333">
<div style="font-size:14px;opacity:0.8;margin-bottom:5px">ğŸ“ˆ DÃ–NÃœÅÃœM ORANI</div>
<div id="conversionRate" style="font-size:42px;font-weight:900">0%</div>
<div style="font-size:12px;opacity:0.7;margin-top:5px">ziyaretÃ§i â†’ sipariÅŸ</div>
</div>

</div>

<!-- ORTA KISIM - 2 SÃœTUN -->
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px;margin-bottom:25px">

<!-- SAYFA Ä°STATÄ°STÄ°KLERÄ° -->
<div style="background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“Š</span> SAYFA Ä°STATÄ°STÄ°KLERÄ°
</div>
<div id="pageStats">
</div>
</div>

<!-- TIKLAMA ANALÄ°ZÄ° -->
<div style="background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ–±ï¸</span> TIKLAMA ANALÄ°ZÄ°
</div>
<div style="display:flex;flex-direction:column;gap:15px">
<div style="display:flex;justify-content:space-between;align-items:center;background:rgba(40,167,69,0.2);padding:15px;border-radius:10px;border-left:4px solid #28a745">
<span>ğŸ›’ SipariÅŸ Ver Butonu</span>
<span id="orderBtnClicks" style="font-size:24px;font-weight:bold;color:#28a745">0</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;background:rgba(37,211,102,0.2);padding:15px;border-radius:10px;border-left:4px solid #25d366">
<span>ğŸ’¬ WhatsApp TÄ±klamasÄ±</span>
<span id="whatsappClicks" style="font-size:24px;font-weight:bold;color:#25d366">0</span>
</div>
</div>
</div>

</div>

<!-- ALT KISIM - 3 SÃœTUN -->
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px">

<!-- CÄ°HAZ BÄ°LGÄ°SÄ° -->
<div style="background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“±</span> CÄ°HAZ DAÄILIMI
</div>
<div style="display:flex;justify-content:space-around;align-items:center;flex-wrap:wrap;gap:15px">
<div style="text-align:center">
<div style="font-size:40px">ğŸ“±</div>
<div id="mobilePercent" style="font-size:28px;font-weight:bold;color:#4facfe">0%</div>
<div style="font-size:12px;color:#888">Mobil</div>
</div>
<div style="text-align:center">
<div style="font-size:40px">ğŸ“±</div>
<div id="tabletPercent" style="font-size:28px;font-weight:bold;color:#43e97b">0%</div>
<div style="font-size:12px;color:#888">Tablet</div>
</div>
<div style="text-align:center">
<div style="font-size:40px">ğŸ’»</div>
<div id="laptopPercent" style="font-size:28px;font-weight:bold;color:#f093fb">0%</div>
<div style="font-size:12px;color:#888">Laptop</div>
</div>
<div style="text-align:center">
<div style="font-size:40px">ğŸ–¥ï¸</div>
<div id="desktopPercent" style="font-size:28px;font-weight:bold;color:#fa709a">0%</div>
<div style="font-size:12px;color:#888">MasaÃ¼stÃ¼</div>
</div>
</div>
</div>

<!-- ÅEHÄ°R BAZLI -->
<div style="background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ—ºï¸</span> ÅEHÄ°RLER
</div>
<div id="cityStats" style="max-height:200px;overflow-y:auto">
</div>
</div>

<!-- SON AKTÄ°VÄ°TELER -->
<div style="background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ•</span> SON AKTÄ°VÄ°TELER
<div id="liveIndicator" style="width:8px;height:8px;background:#28a745;border-radius:50%;animation:pulse 1s infinite"></div>
</div>
<div id="recentActivity" style="max-height:200px;overflow-y:auto;font-size:13px">
</div>
</div>

</div>

<!-- SÄ°PARÄ°Å DURUMU -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“‹</span> SÄ°PARÄ°Å DURUMU
</div>
<div style="display:flex;justify-content:space-around;flex-wrap:wrap;gap:20px">
<div style="text-align:center;background:rgba(255,193,7,0.2);padding:20px 40px;border-radius:10px;border:2px solid #ffc107">
<div style="font-size:14px;color:#ffc107;margin-bottom:5px">â³ BEKLEYEN</div>
<div id="pendingOrders" style="font-size:36px;font-weight:bold;color:#ffc107">0</div>
</div>
<div style="text-align:center;background:rgba(40,167,69,0.2);padding:20px 40px;border-radius:10px;border:2px solid #28a745">
<div style="font-size:14px;color:#28a745;margin-bottom:5px">âœ… TAMAMLANAN</div>
<div id="completedOrders" style="font-size:36px;font-weight:bold;color:#28a745">0</div>
</div>
<div style="text-align:center;background:rgba(220,53,69,0.2);padding:20px 40px;border-radius:10px;border:2px solid #dc3545">
<div style="font-size:14px;color:#dc3545;margin-bottom:5px">âŒ Ä°PTAL</div>
<div id="cancelledOrders" style="font-size:36px;font-weight:bold;color:#dc3545">0</div>
</div>
</div>
</div>

<!-- HAFTALIK SATIÅ GRAFÄ°ÄÄ° -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“Š</span> HAFTALIK SATIÅ GRAFÄ°ÄÄ°
</div>
<div id="weeklyChart" style="display:flex;align-items:flex-end;justify-content:space-around;height:150px;padding:10px 0">
</div>
</div>
<script>
// HaftalÄ±k satÄ±ÅŸ grafiÄŸi - Firebase'den veri Ã§eker
function haftalikGrafigiBagla() {
  if(typeof database === 'undefined') {
    setTimeout(haftalikGrafigiBagla, 500);
    return;
  }
  var gunAdlari = ['Pzt','Sal','Ã‡ar','Per','Cum','Cmt','Paz'];
  var bugun = new Date();
  var bugunIndex = bugun.getDay(); // 0=Pazar
  if(bugunIndex === 0) bugunIndex = 7; // Pazar'Ä± 7 yap
  
  // Son 7 gÃ¼nÃ¼n tarihlerini hesapla (Pazartesi'den bugÃ¼ne)
  var haftaninGunleri = {};
  for(var i=0; i<7; i++) {
    var gun = new Date();
    var fark = bugunIndex - 1 - i; // Pazartesi'den baÅŸla
    gun.setDate(bugun.getDate() - fark);
    var tarihStr = gun.getDate().toString().padStart(2,'0') + '.' + (gun.getMonth()+1).toString().padStart(2,'0') + '.' + gun.getFullYear();
    haftaninGunleri[tarihStr] = i; // tarih -> gÃ¼n indexi
  }
  
  database.ref('siparisler').on('value', function(snapshot) {
    var gunlukSatis = [0,0,0,0,0,0,0]; // Pzt-Paz
    
    snapshot.forEach(function(child) {
      var siparis = child.val();
      if(siparis && siparis.tarih) {
        var tarih = siparis.tarih;
        if(haftaninGunleri.hasOwnProperty(tarih)) {
          gunlukSatis[haftaninGunleri[tarih]]++;
        }
      }
    });
    
    // GrafiÄŸi Ã§iz
    var container = document.getElementById('weeklyChart');
    if(!container) return;
    container.innerHTML = '';
    
    var maxSatis = Math.max.apply(null, gunlukSatis) || 1;
    
    for(var i=0; i<7; i++) {
      var satis = gunlukSatis[i];
      var yuzde = (satis / maxSatis) * 100;
      var yukseklik = Math.max(20, yuzde * 1.2); // Min 20px
      
      var bugunMu = (i === bugunIndex - 1);
      var renk = bugunMu ? 'linear-gradient(180deg,#43e97b,#38f9d7)' : 'linear-gradient(180deg,#667eea,#764ba2)';
      
      var div = document.createElement('div');
      div.style.textAlign = 'center';
      div.innerHTML = '<div style="font-size:10px;color:#4facfe;margin-bottom:3px">'+(satis>0?satis:'')+'</div><div style="width:40px;background:'+renk+';border-radius:5px 5px 0 0;height:'+yukseklik+'px;transition:height 0.3s"></div><div style="font-size:11px;color:'+(bugunMu?'#43e97b':'#888')+';margin-top:5px;font-weight:'+(bugunMu?'bold':'normal')+'">'+gunAdlari[i]+'</div>';
      container.appendChild(div);
    }
  });
}
window.addEventListener('load', haftalikGrafigiBagla);
</script>

<!-- EN Ã‡OK SATAN ÃœRÃœNLER -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ†</span> EN Ã‡OK SATAN ÃœRÃœNLER
</div>
<div id="topProducts" style="max-height:150px;overflow-y:auto">
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,215,0,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid gold">
<span>ğŸ¥‡ ÃœrÃ¼n 1</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(192,192,192,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid silver">
<span>ğŸ¥ˆ ÃœrÃ¼n 2</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(205,127,50,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #cd7f32">
<span>ğŸ¥‰ ÃœrÃ¼n 3</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(138,43,226,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #8a2be2">
<span>ğŸ… ÃœrÃ¼n 4</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,191,255,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #00bfff">
<span>ğŸ… ÃœrÃ¼n 5</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(50,205,50,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #32cd32">
<span>ğŸ… ÃœrÃ¼n 6</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,165,0,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #ffa500">
<span>ğŸ… ÃœrÃ¼n 7</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,20,147,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #ff1493">
<span>ğŸ… ÃœrÃ¼n 8</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(0,206,209,0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid #00ced1">
<span>ğŸ… ÃœrÃ¼n 9</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba(255,99,71,0.1);border-radius:8px;border-left:4px solid #ff6347">
<span>ğŸ… ÃœrÃ¼n 10</span><span style="color:#43e97b;font-weight:bold">0 adet</span>
</div>
</div>
</div>

<!-- FÄ°NANSAL Ã–ZET -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ’°</span> FÄ°NANSAL Ã–ZET
</div>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px">
<div style="text-align:center;background:rgba(67,233,123,0.1);padding:20px;border-radius:10px;border:1px solid #43e97b">
<div style="font-size:12px;color:#888;margin-bottom:5px">TOPLAM CÄ°RO</div>
<div id="totalRevenue" style="font-size:28px;font-weight:bold;color:#43e97b">0â‚º</div>
</div>
<div style="text-align:center;background:rgba(79,172,254,0.1);padding:20px;border-radius:10px;border:1px solid #4facfe">
<div style="font-size:12px;color:#888;margin-bottom:5px">ORT. SÄ°PARÄ°Å</div>
<div id="avgOrder" style="font-size:28px;font-weight:bold;color:#4facfe">0â‚º</div>
</div>
<div style="text-align:center;background:rgba(250,112,154,0.1);padding:20px;border-radius:10px;border:1px solid #fa709a">
<div style="font-size:12px;color:#888;margin-bottom:5px">TAHMINI KAR</div>
<div id="estimatedProfit" style="font-size:28px;font-weight:bold;color:#fa709a">0â‚º</div>
</div>
</div>
</div>

<!-- SON SÄ°PARÄ°ÅLER TABLOSU -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“¦</span> SON SÄ°PARÄ°ÅLER
</div>
<div style="overflow-x:auto">
<table style="width:100%;border-collapse:collapse;font-size:13px">
<thead>
<tr style="background:rgba(255,255,255,0.1)">
<th style="padding:12px;text-align:left;border-bottom:1px solid #444">Tarih</th>
<th style="padding:12px;text-align:left;border-bottom:1px solid #444">MÃ¼ÅŸteri</th>
<th style="padding:12px;text-align:left;border-bottom:1px solid #444">ÃœrÃ¼n</th>
<th style="padding:12px;text-align:right;border-bottom:1px solid #444">Tutar</th>
<th style="padding:12px;text-align:center;border-bottom:1px solid #444">Durum</th>
</tr>
</thead>
<tbody id="ordersTable">
<tr><td colspan="5" style="padding:20px;text-align:center;color:#888">HenÃ¼z sipariÅŸ yok</td></tr>
</tbody>
</table>
</div>
</div>

<!-- KARGO DURUMU -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸšš</span> KARGO DURUMU
</div>
<div style="display:flex;justify-content:space-around;flex-wrap:wrap;gap:15px">
<div style="text-align:center;flex:1;min-width:120px">
<div style="font-size:40px">ğŸ“¦</div>
<div id="cargoWaiting" style="font-size:24px;font-weight:bold;color:#ffc107">0</div>
<div style="font-size:12px;color:#888">HazÄ±rlanÄ±yor</div>
</div>
<div style="text-align:center;flex:1;min-width:120px">
<div style="font-size:40px">ğŸš›</div>
<div id="cargoOnWay" style="font-size:24px;font-weight:bold;color:#4facfe">0</div>
<div style="font-size:12px;color:#888">Yolda</div>
</div>
<div style="text-align:center;flex:1;min-width:120px">
<div style="font-size:40px">âœ…</div>
<div id="cargoDelivered" style="font-size:24px;font-weight:bold;color:#43e97b">0</div>
<div style="font-size:12px;color:#888">Teslim Edildi</div>
</div>
<div style="text-align:center;flex:1;min-width:120px">
<div style="font-size:40px">â†©ï¸</div>
<div id="cargoReturned" style="font-size:24px;font-weight:bold;color:#dc3545">0</div>
<div style="font-size:12px;color:#888">Ä°ade</div>
</div>
</div>
</div>

<!-- BÄ°LDÄ°RÄ°MLER -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between">
<div style="display:flex;align-items:center;gap:10px">
<span>ğŸ””</span> BÄ°LDÄ°RÄ°MLER
<span id="notifCount" style="background:#dc3545;color:#fff;padding:2px 8px;border-radius:10px;font-size:12px">0</span>
</div>
<button onclick="toggleSound()" id="soundBtn" style="background:none;border:1px solid #444;color:#fff;padding:5px 10px;border-radius:5px;cursor:pointer;font-size:12px">ğŸ”Š Ses AÃ§Ä±k</button>
</div>
<div id="notifications" style="max-height:200px;overflow-y:auto">
<div style="padding:10px;background:rgba(255,255,255,0.05);border-radius:8px;margin-bottom:8px;display:flex;align-items:center;gap:10px">
<span>â„¹ï¸</span><span style="color:#888">HenÃ¼z bildirim yok</span>
</div>
</div>
</div>

<!-- HEDEFLER -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ¯</span> GÃœNLÃœK HEDEF
</div>
<div style="margin-bottom:15px">
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span>SatÄ±ÅŸ Hedefi</span>
<span id="goalProgress">0 / 10 sipariÅŸ</span>
</div>
<div style="background:#333;border-radius:10px;height:20px;overflow:hidden">
<div id="goalBar" style="background:linear-gradient(90deg,#43e97b,#38f9d7);height:100%;width:0%;transition:width 0.5s ease;border-radius:10px"></div>
</div>
</div>
<div>
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span>Ciro Hedefi</span>
<span id="revenueGoalProgress">0â‚º / 10.000â‚º</span>
</div>
<div style="background:#333;border-radius:10px;height:20px;overflow:hidden">
<div id="revenueGoalBar" style="background:linear-gradient(90deg,#fa709a,#fee140);height:100%;width:0%;transition:width 0.5s ease;border-radius:10px"></div>
</div>
</div>
</div>
<script>
// Hedefler - Firebase'e baÄŸlÄ±
function hedefleriBagla() {
  if(typeof database === 'undefined') { setTimeout(hedefleriBagla, 500); return; }
  
  database.ref('istatistikler').on('value', function(snapshot) {
    var istat = snapshot.val() || {};
    var bugunSiparis = istat.bugunSiparis || 0;
    var bugunCiro = istat.bugunCiro || 0;
    
    var siparisHedef = 10;
    var ciroHedef = 10000;
    
    var siparisYuzde = Math.min(100, (bugunSiparis / siparisHedef) * 100);
    var ciroYuzde = Math.min(100, (bugunCiro / ciroHedef) * 100);
    
    var goalProgress = document.getElementById('goalProgress');
    var goalBar = document.getElementById('goalBar');
    var revenueGoalProgress = document.getElementById('revenueGoalProgress');
    var revenueGoalBar = document.getElementById('revenueGoalBar');
    
    if(goalProgress) goalProgress.textContent = bugunSiparis + ' / ' + siparisHedef + ' sipariÅŸ';
    if(goalBar) goalBar.style.width = siparisYuzde + '%';
    if(revenueGoalProgress) revenueGoalProgress.textContent = bugunCiro.toLocaleString('tr-TR') + 'â‚º / ' + ciroHedef.toLocaleString('tr-TR') + 'â‚º';
    if(revenueGoalBar) revenueGoalBar.style.width = ciroYuzde + '%';
  });
}
window.addEventListener('load', hedefleriBagla);
</script>

<!-- PERFORMANS -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“ˆ</span> PERFORMANS
</div>
<div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px">
<div style="background:rgba(255,255,255,0.05);padding:15px;border-radius:10px">
<div style="font-size:12px;color:#888;margin-bottom:5px">âš¡ Sayfa HÄ±zÄ±</div>
<div style="font-size:20px;font-weight:bold;color:#43e97b">HÄ±zlÄ±</div>
<div style="font-size:11px;color:#666">Ort. 1.2s yÃ¼kleme</div>
</div>
<div style="background:rgba(255,255,255,0.05);padding:15px;border-radius:10px">
<div style="font-size:12px;color:#888;margin-bottom:5px">ğŸŸ¢ Uptime</div>
<div style="font-size:20px;font-weight:bold;color:#43e97b">99.9%</div>
<div style="font-size:11px;color:#666">Son 30 gÃ¼n</div>
</div>
<div style="background:rgba(255,255,255,0.05);padding:15px;border-radius:10px">
<div style="font-size:12px;color:#888;margin-bottom:5px">ğŸ”„ Son GÃ¼ncelleme</div>
<div id="lastUpdate" style="font-size:14px;font-weight:bold;color:#4facfe">-</div>
</div>
<div style="background:rgba(255,255,255,0.05);padding:15px;border-radius:10px">
<div style="font-size:12px;color:#888;margin-bottom:5px">âš ï¸ Hata SayÄ±sÄ±</div>
<div style="font-size:20px;font-weight:bold;color:#43e97b">0</div>
<div style="font-size:11px;color:#666">Son 24 saat</div>
</div>
</div>
</div>
<script>
// Son gÃ¼ncelleme zamanÄ±
setInterval(function() {
  var lastUpdateEl = document.getElementById('lastUpdate');
  if(lastUpdateEl) lastUpdateEl.textContent = new Date().toLocaleTimeString('tr-TR');
}, 1000);
</script>

<!-- 3D DÃ–NEN DÃœNYA -->
<!-- 3D DÃœNYA -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px;overflow:visible">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸŒ</span> DÃœNYA HARÄ°TASI - ZÄ°YARETÃ‡Ä° KONUMLARI
</div>
<div style="display:flex;justify-content:center;align-items:center;position:relative;flex-wrap:wrap;gap:30px;overflow:visible;padding:15px">
<div id="globeContainer" style="width:800px;height:600px;position:relative;cursor:grab"></div>
<div style="text-align:left">
<div style="margin-bottom:15px;padding:15px;background:rgba(255,255,255,0.05);border-radius:8px">
<div style="color:#dc3545;font-weight:bold;font-size:16px">ğŸ‡¹ğŸ‡· TÃ¼rkiye</div>
<div style="font-size:32px;font-weight:bold" id="turkeyVisitors">0</div>
<div style="font-size:12px;color:#888">ziyaretÃ§i</div>
</div>
<div style="font-size:12px;color:#888;margin-top:10px">ğŸ–±ï¸ Fare ile dÃ¶ndÃ¼r</div>
<div style="font-size:11px;color:#666;margin-top:5px">ğŸ”„ Otomatik dÃ¶nÃ¼yor</div>
</div>
</div>
</div>
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
<script src="firebase-config.js"></script>

<!-- TÃœM Ä°STATÄ°STÄ°KLER - FIREBASE ENTEGRASYONU -->
<script>
(function(){
  var simdi = new Date();
  var bugun = simdi.getDate().toString().padStart(2,'0') + '.' + (simdi.getMonth()+1).toString().padStart(2,'0') + '.' + simdi.getFullYear();
  
  // AYLIK SIFIRLAMA - Her ayÄ±n 1'inde Ã§alÄ±ÅŸÄ±r
  function aylikSifirlama() {
    var simdi = new Date();
    var gun = simdi.getDate();
    var ay = simdi.getMonth();
    var yil = simdi.getFullYear();
    var sonSifirlamaKey = 'son_aylik_sifirlama';
    var sonSifirlama = localStorage.getItem(sonSifirlamaKey);
    var buAyKey = yil + '-' + ay;
    
    // AyÄ±n 1'i ve bu ay henÃ¼z sÄ±fÄ±rlanmadÄ±ysa
    if(gun === 1 && sonSifirlama !== buAyKey) {
      console.log('ğŸ”„ AylÄ±k sÄ±fÄ±rlama baÅŸlÄ±yor...');
      
      // SÄ±fÄ±rlanacak tablolar
      database.ref('ziyaretciler').remove();
      database.ref('tiklamalar').remove();
      database.ref('aktiviteler').remove();
      database.ref('canliZiyaretciler').remove();
      
      // SÄ±fÄ±rlama kaydÄ±
      localStorage.setItem(sonSifirlamaKey, buAyKey);
      console.log('âœ… AylÄ±k sÄ±fÄ±rlama tamamlandÄ±: ' + buAyKey);
      
      // Bildirim gÃ¶ster
      alert('ğŸ“Š AylÄ±k veriler sÄ±fÄ±rlandÄ±!\n\nSÄ±fÄ±rlanan: ZiyaretÃ§iler, TÄ±klamalar, Aktiviteler\nKorunan: SipariÅŸler, Faturalar, Stoklar');
    }
  }
  aylikSifirlama();
  
  // Tarih/Saat gÃ¼ncelle
  function tarihGuncelle() {
    var now = new Date();
    var el = document.getElementById('currentDateTime');
    if(el) el.textContent = now.toLocaleDateString('tr-TR') + ' ' + now.toLocaleTimeString('tr-TR');
  }
  tarihGuncelle(); setInterval(tarihGuncelle, 1000);
  
  // ========== ANLIK Ä°STATÄ°STÄ°KLER (YENÄ° SÄ°STEM) ==========
  // Ä°lk yÃ¼klemede test verisi oluÅŸtur
  database.ref('istatistikler').once('value', function(snapshot) {
    if(!snapshot.exists()) {
      console.log('ğŸ“Š Ä°statistik tablosu oluÅŸturuluyor...');
      database.ref('istatistikler').set({
        bugunTarih: bugun,
        bugunSiparis: 0,
        bugunCiro: 0,
        bugunZiyaretci: 0,
        toplamSiparis: 0,
        toplamCiro: 0,
        toplamZiyaretci: 0
      });
    }
  });
  
  database.ref('istatistikler').on('value', function(snapshot) {
    var istat = snapshot.val() || {};
    console.log('ğŸ“Š Firebase istatistikler:', istat);
    
    var kayitliTarih = istat.bugunTarih || '';
    
    // EÄŸer kayÄ±tlÄ± tarih bugÃ¼n deÄŸilse, bugÃ¼nkÃ¼ deÄŸerler 0
    var bugunSiparis = 0, bugunCiro = 0, bugunZiyaretci = 0;
    if(kayitliTarih === bugun) {
      bugunSiparis = istat.bugunSiparis || 0;
      bugunCiro = istat.bugunCiro || 0;
      bugunZiyaretci = istat.bugunZiyaretci || 0;
    }
    
    var toplamSiparis = istat.toplamSiparis || 0;
    var toplamCiro = istat.toplamCiro || 0;
    var toplamZiyaretci = istat.toplamZiyaretci || 0;
    
    // KartlarÄ± gÃ¼ncelle
    var todayOrdersEl = document.getElementById('todayOrders');
    var totalOrdersEl = document.getElementById('totalOrders');
    var todayRevenueEl = document.getElementById('todayRevenue');
    var totalRevenueEl = document.getElementById('totalRevenue');
    var todayVisitorsEl = document.getElementById('todayVisitors');
    var totalVisitorsEl = document.getElementById('totalVisitors');
    
    if(todayOrdersEl) todayOrdersEl.textContent = bugunSiparis;
    if(totalOrdersEl) totalOrdersEl.textContent = toplamSiparis;
    if(todayRevenueEl) todayRevenueEl.textContent = bugunCiro.toLocaleString('tr-TR') + 'â‚º';
    if(totalRevenueEl) totalRevenueEl.textContent = toplamCiro.toLocaleString('tr-TR') + 'â‚º';
    if(todayVisitorsEl) todayVisitorsEl.textContent = bugunZiyaretci;
    if(totalVisitorsEl) totalVisitorsEl.textContent = Math.max(toplamZiyaretci, bugunZiyaretci);
    
    // DÃ¶nÃ¼ÅŸÃ¼m oranÄ±
    var donusumOrani = bugunZiyaretci > 0 ? ((bugunSiparis / bugunZiyaretci) * 100).toFixed(1) : 0;
    var conversionEl = document.getElementById('conversionRate');
    if(conversionEl) conversionEl.textContent = donusumOrani + '%';
    
    // Ortalama sipariÅŸ
    var ortSiparis = toplamSiparis > 0 ? Math.round(toplamCiro / toplamSiparis) : 0;
    var avgOrderEl = document.getElementById('avgOrder');
    if(avgOrderEl) avgOrderEl.textContent = ortSiparis.toLocaleString('tr-TR') + 'â‚º';
    
    // ========== SAYFA Ä°STATÄ°STÄ°KLERÄ° (istatistikler tablosundan) ==========
    var urunZiyaretleri = [];
    for(var i=1; i<=10; i++) {
      urunZiyaretleri.push(istat['urun'+i+'Ziyaret'] || 0);
    }
    var maxUrunZiyaret = Math.max.apply(null, urunZiyaretleri) || 1;
    var pageStatsHtml = '';
    for(var i=1; i<=10; i++) {
      var ziyaret = urunZiyaretleri[i-1];
      var yuzde = Math.round((ziyaret/maxUrunZiyaret)*100);
      pageStatsHtml += '<div style="margin-bottom:12px"><div style="display:flex;justify-content:space-between;margin-bottom:4px"><span>ÃœrÃ¼n '+i+'</span><span style="color:#4facfe">'+ziyaret+' ziyaret</span></div><div style="background:#333;border-radius:5px;height:8px;overflow:hidden"><div style="background:linear-gradient(90deg,#667eea,#764ba2);height:100%;width:'+yuzde+'%"></div></div></div>';
    }
    var pageStatsEl = document.getElementById('pageStats'); if(pageStatsEl) pageStatsEl.innerHTML = pageStatsHtml;
    // =====================================================================
    
    // WhatsApp tÄ±klama sayÄ±sÄ±
    var whatsappTiklama = istat.whatsappTiklama || 0;
    var whatsappClicksEl = document.getElementById('whatsappClicks');
    if(whatsappClicksEl) whatsappClicksEl.textContent = whatsappTiklama;
    
    // Tahmini kar (%30)
    var estimatedProfitEl = document.getElementById('estimatedProfit');
    if(estimatedProfitEl) estimatedProfitEl.textContent = Math.round(toplamCiro * 0.3).toLocaleString('tr-TR') + 'â‚º';
    
    console.log('âœ… Kartlar gÃ¼ncellendi:', {bugunSiparis, bugunCiro, bugunZiyaretci, toplamSiparis, toplamCiro});
  });
  // ======================================================
  
  // CanlÄ± ziyaretÃ§ileri dinle
  database.ref('canliZiyaretciler').on('value', function(snapshot) {
    var now = Date.now(), birDakikaOnce = now - 60000, aktifSayi = 0;
    snapshot.forEach(function(child) {
      var data = child.val();
      if(data && data.timestamp && data.timestamp > birDakikaOnce) aktifSayi++;
    });
    var onlineEl = document.getElementById('onlineCount');
    if(onlineEl) onlineEl.textContent = aktifSayi;
  });
  
  // Eski kayÄ±tlarÄ± temizle
  setInterval(function() {
    var now = Date.now(), besDakikaOnce = now - 300000;
    database.ref('canliZiyaretciler').once('value', function(snapshot) {
      snapshot.forEach(function(child) {
        var data = child.val();
        if(data && data.timestamp && data.timestamp < besDakikaOnce) database.ref('canliZiyaretciler/' + child.key).remove();
      });
    });
  }, 60000);
  
  // ZÄ°YARETÃ‡Ä° Ä°STATÄ°STÄ°KLERÄ°
  database.ref('ziyaretciler').on('value', function(snapshot) {
    var simdiZ = new Date();
    var bugunZ = simdiZ.getDate().toString().padStart(2,'0') + '.' + (simdiZ.getMonth()+1).toString().padStart(2,'0') + '.' + simdiZ.getFullYear();
    var bugunZiyaretci = 0, toplamZiyaret = 0, benzersizVisitorIds = {}, sayfaZiyaretleri = {}, sehirler = {};
    var cihazlar = {mobil:0, tablet:0, laptop:0, masaustu:0};
    var trafikler = {google:0, instagram:0, tiktok:0, facebook:0, direkt:0, diger:0};
    for(var i=1; i<=10; i++) sayfaZiyaretleri[i] = 0;
    
    snapshot.forEach(function(child) {
      var data = child.val();
      if(!data) return;
      
      toplamZiyaret++;
      if(data.visitorId) benzersizVisitorIds[data.visitorId] = true;
      
      // Sayfa ziyaretlerini her zaman say (toplam)
      if(data.sayfa) sayfaZiyaretleri[data.sayfa] = (sayfaZiyaretleri[data.sayfa] || 0) + 1;
      
      // BugÃ¼nkÃ¼ ziyaretÃ§iler - tarih karÅŸÄ±laÅŸtÄ±rmasÄ±
      var ziyaretTarih = data.tarih || '';
      if(ziyaretTarih === bugunZ) {
        bugunZiyaretci++;
        if(data.sehir && data.sehir !== '') sehirler[data.sehir] = (sehirler[data.sehir] || 0) + 1;
        if(data.cihaz) cihazlar[data.cihaz] = (cihazlar[data.cihaz] || 0) + 1;
        if(data.trafikKaynagi) trafikler[data.trafikKaynagi] = (trafikler[data.trafikKaynagi] || 0) + 1;
      }
    });
    
    document.getElementById('todayVisitors').textContent = bugunZiyaretci;
    // Toplam = en az bugÃ¼nkÃ¼ kadar olmalÄ±
    var toplamGosterilecek = Math.max(toplamZiyaret, Object.keys(benzersizVisitorIds).length, bugunZiyaretci);
    document.getElementById('totalVisitors').textContent = toplamGosterilecek;
    var turkeyEl = document.getElementById('turkeyVisitors'); if(turkeyEl) turkeyEl.textContent = bugunZiyaretci;
    
    // Åehirler
    var sehirArr = Object.entries(sehirler).sort(function(a,b){return b[1]-a[1]}).slice(0,10);
    var cityHtml = '';
    sehirArr.forEach(function(s) { cityHtml += '<div style="display:flex;justify-content:space-between;padding:8px;background:rgba(255,255,255,0.05);border-radius:5px;margin-bottom:5px"><span>ğŸ“ '+s[0]+'</span><span style="color:#43e97b;font-weight:bold">'+s[1]+'</span></div>'; });
    if(cityHtml === '') cityHtml = '<div style="color:#888;text-align:center">HenÃ¼z ÅŸehir verisi yok</div>';
    var cityStatsEl = document.getElementById('cityStats'); if(cityStatsEl) cityStatsEl.innerHTML = cityHtml;
    
    // Globe'a ÅŸehir verilerini gÃ¶nder
    if(typeof window.updateCityVisitors === 'function') {
      window.updateCityVisitors(sehirler);
    }
    
    // Cihaz daÄŸÄ±lÄ±mÄ±
    var toplamCihaz = bugunZiyaretci || 1;
    var mobileEl = document.getElementById('mobilePercent'); if(mobileEl) mobileEl.textContent = Math.round((cihazlar.mobil/toplamCihaz)*100) + '%';
    var tabletEl = document.getElementById('tabletPercent'); if(tabletEl) tabletEl.textContent = Math.round((cihazlar.tablet/toplamCihaz)*100) + '%';
    var laptopEl = document.getElementById('laptopPercent'); if(laptopEl) laptopEl.textContent = Math.round((cihazlar.laptop/toplamCihaz)*100) + '%';
    var desktopEl = document.getElementById('desktopPercent'); if(desktopEl) desktopEl.textContent = Math.round((cihazlar.masaustu/toplamCihaz)*100) + '%';
    
    // Trafik kaynaklarÄ±
    var toplamTrafik = bugunZiyaretci || 1;
    var googleP = Math.round((trafikler.google/toplamTrafik)*100);
    var instaP = Math.round((trafikler.instagram/toplamTrafik)*100);
    var tiktokP = Math.round((trafikler.tiktok/toplamTrafik)*100);
    var direktP = Math.round(((trafikler.direkt + (trafikler.diger||0))/toplamTrafik)*100);
    var gT = document.getElementById('googleTraffic'); if(gT) gT.textContent = googleP + '%';
    var iT = document.getElementById('instaTraffic'); if(iT) iT.textContent = instaP + '%';
    var tT = document.getElementById('tiktokTraffic'); if(tT) tT.textContent = tiktokP + '%';
    var dT = document.getElementById('directTraffic'); if(dT) dT.textContent = direktP + '%';
    var gB = document.getElementById('googleBar'); if(gB) gB.style.width = googleP + '%';
    var iB = document.getElementById('instaBar'); if(iB) iB.style.width = instaP + '%';
    var tB = document.getElementById('tiktokBar'); if(tB) tB.style.width = tiktokP + '%';
    var dB = document.getElementById('directBar'); if(dB) dB.style.width = direktP + '%';
    
    window.bugunZiyaretciSayisi = bugunZiyaretci;
    hesaplaDonusumOrani(bugunZiyaretci);
  });
  
  // SÄ°PARÄ°Å Ä°STATÄ°STÄ°KLERÄ°
  database.ref('siparisler').on('value', function(snapshot) {
    var bugunSiparis = 0, toplamSiparis = 0, bugunCiro = 0, toplamCiro = 0;
    var bekleyen = 0, tamamlanan = 0, iptal = 0;
    var kargoHazirlaniyor = 0, kargoYolda = 0, kargoTeslim = 0, kargoIade = 0;
    var urunSatislari = {}, haftalikSatislar = [0,0,0,0,0,0,0], sonSiparisler = [];
    for(var i=1; i<=10; i++) urunSatislari[i] = 0;
    
    // Son 7 gÃ¼nÃ¼n tarihlerini aynÄ± formatta oluÅŸtur
    var son7Gun = [];
    for(var d=6; d>=0; d--) { 
      var t = new Date(); 
      t.setDate(t.getDate() - d); 
      var gunStr = t.getDate().toString().padStart(2,'0') + '.' + (t.getMonth()+1).toString().padStart(2,'0') + '.' + t.getFullYear();
      son7Gun.push(gunStr); 
    }
    
    snapshot.forEach(function(child) {
      var data = child.val(); 
      if(!data) return;
      
      toplamSiparis++;
      
      // TutarÄ± sayÄ±ya Ã§evir (299â‚º -> 299)
      var tutarStr = (data.tutar || '0').toString();
      var tutar = parseInt(tutarStr.replace(/[^0-9]/g, '')) || 0;
      toplamCiro += tutar;
      
      // Durum kontrolÃ¼
      var durum = (data.durum || 'beklemede').toLowerCase();
      if(durum === 'tamamlandi' || durum === 'tamamlandÄ±' || durum === 'teslim edildi') tamamlanan++; 
      else if(durum === 'iptal' || durum === 'iade') iptal++; 
      else bekleyen++;
      
      // Kargo durumu
      var kargoDurum = (data.kargoDurum || data.durum || 'hazirlaniyor').toLowerCase();
      if(kargoDurum.includes('yolda') || kargoDurum.includes('kargoya verildi')) kargoYolda++; 
      else if(kargoDurum.includes('teslim')) kargoTeslim++; 
      else if(kargoDurum.includes('iade')) kargoIade++; 
      else kargoHazirlaniyor++;
      
      // ÃœrÃ¼n satÄ±ÅŸlarÄ±
      var forum = parseInt(data.forum) || 1; 
      urunSatislari[forum] = (urunSatislari[forum] || 0) + 1;
      
      // BugÃ¼nkÃ¼ sipariÅŸler - tarih karÅŸÄ±laÅŸtÄ±rmasÄ±
      var siparisTarih = data.tarih || '';
      if(siparisTarih === bugun) { 
        bugunSiparis++; 
        bugunCiro += tutar; 
      }
      
      // HaftalÄ±k satÄ±ÅŸlar
      var siparisIdx = son7Gun.indexOf(siparisTarih); 
      if(siparisIdx > -1) haftalikSatislar[siparisIdx]++;
      
      // Son sipariÅŸler listesi
      sonSiparisler.push({ 
        tarih: siparisTarih || '-', 
        musteri: data.musteri || 'MÃ¼ÅŸteri', 
        urun: data.urunAdi || ('ÃœrÃ¼n ' + forum), 
        tutar: data.tutar || '0â‚º', 
        durum: durum, 
        timestamp: data.timestamp || 0 
      });
    });
    
    document.getElementById('todayOrders').textContent = bugunSiparis;
    document.getElementById('totalOrders').textContent = toplamSiparis;
    document.getElementById('todayRevenue').textContent = bugunCiro.toLocaleString('tr-TR') + 'â‚º';
    document.getElementById('pendingOrders').textContent = bekleyen;
    document.getElementById('completedOrders').textContent = tamamlanan;
    document.getElementById('cancelledOrders').textContent = iptal;
    document.getElementById('cargoWaiting').textContent = kargoHazirlaniyor;
    document.getElementById('cargoOnWay').textContent = kargoYolda;
    document.getElementById('cargoDelivered').textContent = kargoTeslim;
    document.getElementById('cargoReturned').textContent = kargoIade;
    document.getElementById('totalRevenue').textContent = toplamCiro.toLocaleString('tr-TR') + 'â‚º';
    var ortSiparis = toplamSiparis > 0 ? Math.round(toplamCiro / toplamSiparis) : 0;
    document.getElementById('avgOrder').textContent = ortSiparis.toLocaleString('tr-TR') + 'â‚º';
    document.getElementById('estimatedProfit').textContent = Math.round(toplamCiro * 0.3).toLocaleString('tr-TR') + 'â‚º';
    
    // HaftalÄ±k satÄ±ÅŸ grafiÄŸi
    var maxHaftalik = Math.max.apply(null, haftalikSatislar) || 1;
    for(var b=1; b<=7; b++) { var barEl = document.getElementById('bar' + b); if(barEl) barEl.style.height = Math.max(10, Math.round((haftalikSatislar[b-1] / maxHaftalik) * 140)) + 'px'; }
    
    // En Ã§ok satan Ã¼rÃ¼nler
    var urunArr = Object.entries(urunSatislari).sort(function(a,b){return b[1]-a[1]});
    var topProductsHtml = '', renkler = ['gold','silver','#cd7f32','#8a2be2','#00bfff','#32cd32','#ffa500','#ff1493','#00ced1','#ff6347'];
    var madalyalar = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','ğŸ…','ğŸ…','ğŸ…','ğŸ…','ğŸ…','ğŸ…','ğŸ…'];
    urunArr.forEach(function(u, idx) { topProductsHtml += '<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba('+hexToRgb(renkler[idx])+',0.1);border-radius:8px;margin-bottom:8px;border-left:4px solid '+renkler[idx]+'"><span>'+madalyalar[idx]+' ÃœrÃ¼n '+u[0]+'</span><span style="color:#43e97b;font-weight:bold">'+u[1]+' adet</span></div>'; });
    document.getElementById('topProducts').innerHTML = topProductsHtml;
    
    // Son sipariÅŸler tablosu
    sonSiparisler.sort(function(a,b){return b.timestamp - a.timestamp});
    var sonSiparisHtml = '';
    sonSiparisler.slice(0,10).forEach(function(s) {
      var durumRenk = s.durum === 'tamamlandi' || s.durum === 'tamamlandÄ±' ? '#28a745' : (s.durum === 'iptal' ? '#dc3545' : '#ffc107');
      var durumText = s.durum === 'tamamlandi' || s.durum === 'tamamlandÄ±' ? 'âœ…' : (s.durum === 'iptal' ? 'âŒ' : 'â³');
      sonSiparisHtml += '<tr><td style="padding:10px;border-bottom:1px solid #333">'+s.tarih+'</td><td style="padding:10px;border-bottom:1px solid #333">'+s.musteri.substr(0,15)+'</td><td style="padding:10px;border-bottom:1px solid #333">'+s.urun.substr(0,20)+'</td><td style="padding:10px;border-bottom:1px solid #333;text-align:right;color:#43e97b">'+s.tutar+'</td><td style="padding:10px;border-bottom:1px solid #333;text-align:center;color:'+durumRenk+'">'+durumText+'</td></tr>';
    });
    if(sonSiparisHtml === '') sonSiparisHtml = '<tr><td colspan="5" style="padding:20px;text-align:center;color:#888">HenÃ¼z sipariÅŸ yok</td></tr>';
    document.getElementById('ordersTable').innerHTML = sonSiparisHtml;
    
    // GÃ¼nlÃ¼k hedef
    var hedefSiparis = 10, hedefCiro = 10000;
    document.getElementById('goalProgress').textContent = bugunSiparis + ' / ' + hedefSiparis + ' sipariÅŸ';
    document.getElementById('goalBar').style.width = Math.min(100, Math.round((bugunSiparis / hedefSiparis) * 100)) + '%';
    document.getElementById('revenueGoalProgress').textContent = bugunCiro.toLocaleString('tr-TR') + 'â‚º / ' + hedefCiro.toLocaleString('tr-TR') + 'â‚º';
    document.getElementById('revenueGoalBar').style.width = Math.min(100, Math.round((bugunCiro / hedefCiro) * 100)) + '%';
    
    window.bugunSiparisSayisi = bugunSiparis;
    document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('tr-TR');
    
    // DÃ¶nÃ¼ÅŸÃ¼m oranÄ±nÄ± gÃ¼ncelle
    if(window.bugunZiyaretciSayisi) {
      hesaplaDonusumOrani(window.bugunZiyaretciSayisi);
    }
  });
  
  // TIKLAMA ANALÄ°ZÄ° - SipariÅŸ butonu (WhatsApp artÄ±k istatistikler tablosundan geliyor)
  database.ref('tiklamalar').on('value', function(snapshot) {
    var siparisBtn = 0;
    snapshot.forEach(function(child) { var data = child.val(); if(data && data.tarih === bugun) { if(data.tip === 'siparis_btn') siparisBtn++; } });
    document.getElementById('orderBtnClicks').textContent = siparisBtn;
  });
  
  // SON AKTÄ°VÄ°TELER
  database.ref('aktiviteler').orderByChild('timestamp').limitToLast(20).on('value', function(snapshot) {
    var aktiviteler = []; snapshot.forEach(function(child) { aktiviteler.push(child.val()); }); aktiviteler.reverse();
    var html = '';
    aktiviteler.slice(0,10).forEach(function(a) {
      var zaman = a.timestamp ? new Date(a.timestamp).toLocaleTimeString('tr-TR') : '';
      var ikon = a.tip === 'ziyaret' ? 'ğŸ‘ï¸' : (a.tip === 'tiklama' ? 'ğŸ–±ï¸' : 'ğŸ“Œ');
      html += '<div style="padding:8px;background:rgba(255,255,255,0.03);border-radius:5px;margin-bottom:5px;display:flex;justify-content:space-between;align-items:center"><span>'+ikon+' '+a.mesaj+'</span><span style="color:#666;font-size:11px">'+zaman+'</span></div>';
    });
    if(html === '') html = '<div style="color:#888;text-align:center">HenÃ¼z aktivite yok</div>';
    document.getElementById('recentActivity').innerHTML = html;
  });
  
  // STOK DURUMU
  database.ref('forumStoklar').on('value', function(snapshot) {
    var stoklar = snapshot.val() || {}, html = '';
    for(var i=1; i<=10; i++) {
      var stok = stoklar['forum' + i] || 0, renk, durum, bg;
      if(stok <= 0) { renk = '#dc3545'; durum = 'âŒ TÃ¼kendi'; bg = 'rgba(220,53,69,0.1)'; }
      else if(stok <= 5) { renk = '#ffc107'; durum = 'âš ï¸ Az ('+stok+')'; bg = 'rgba(255,193,7,0.1)'; }
      else { renk = '#28a745'; durum = 'âœ“ Stokta ('+stok+')'; bg = 'rgba(40,167,69,0.1)'; }
      html += '<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:'+bg+';border-radius:8px;margin-bottom:8px;border-left:4px solid '+renk+'"><span>ÃœrÃ¼n '+i+'</span><span style="color:'+renk+';font-weight:bold">'+durum+'</span></div>';
    }
    document.getElementById('stockStatus').innerHTML = html;
  });
  
  // BÄ°LDÄ°RÄ°MLER
  database.ref('siparisler').orderByChild('timestamp').limitToLast(5).on('value', function(snapshot) {
    var yeniSiparisler = []; snapshot.forEach(function(child) { var data = child.val(); if(data && data.tarih === bugun) yeniSiparisler.push(data); });
    var html = '';
    yeniSiparisler.reverse().forEach(function(s) { html += '<div style="padding:10px;background:rgba(40,167,69,0.1);border-radius:8px;margin-bottom:8px;display:flex;align-items:center;gap:10px;border-left:3px solid #28a745"><span>ğŸ›’</span><span>Yeni: '+s.musteri+' - '+s.tutar+'</span></div>'; });
    database.ref('forumStoklar').once('value', function(stokSnap) {
      var stoklar = stokSnap.val() || {};
      for(var i=1; i<=10; i++) { var stok = stoklar['forum' + i] || 0; if(stok <= 0) html += '<div style="padding:10px;background:rgba(220,53,69,0.1);border-radius:8px;margin-bottom:8px;display:flex;align-items:center;gap:10px;border-left:3px solid #dc3545"><span>âš ï¸</span><span>ÃœrÃ¼n '+i+' tÃ¼kendi!</span></div>'; }
      if(html === '') html = '<div style="padding:10px;background:rgba(255,255,255,0.05);border-radius:8px;display:flex;align-items:center;gap:10px"><span>â„¹ï¸</span><span style="color:#888">Bildirim yok</span></div>';
      document.getElementById('notifications').innerHTML = html;
      document.getElementById('notifCount').textContent = yeniSiparisler.length;
    });
  });
  
  function hesaplaDonusumOrani(ziyaretci) { var siparis = window.bugunSiparisSayisi || 0; var oran = ziyaretci > 0 ? ((siparis / ziyaretci) * 100).toFixed(1) : 0; document.getElementById('conversionRate').textContent = oran + '%'; }
  function hexToRgb(hex) { if(hex === 'gold') return '255,215,0'; if(hex === 'silver') return '192,192,192'; var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex); return result ? parseInt(result[1],16)+','+parseInt(result[2],16)+','+parseInt(result[3],16) : '255,255,255'; }
  window.sesAcik = true;
  window.toggleSound = function() { window.sesAcik = !window.sesAcik; document.getElementById('soundBtn').textContent = window.sesAcik ? 'ğŸ”Š Ses AÃ§Ä±k' : 'ğŸ”‡ Ses KapalÄ±'; };
  
  // ==================== CANLI ZÄ°YARETÃ‡Ä° TAKÄ°BÄ° KAPALI (Admin paneli) ====================
  // Ana sayfa admin paneli olduÄŸu iÃ§in ziyaretÃ§i olarak sayÄ±lmÄ±yor
})();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
// 3D GLOBE - GerÃ§ek DÃ¼nya HaritasÄ±
window.addEventListener('load', function() {
    setTimeout(function() {
        var container = document.getElementById('globeContainer');
        if (!container) return;
        
        try {
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);
            camera.position.z = 3.5;
            
            var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(800, 600);
            renderer.setClearColor(0x000000, 0);
            container.appendChild(renderer.domElement);
            
            // DÃ¼nya kÃ¼resi - GERÃ‡EK DÃœNYA (Image ile)
            var geometry = new THREE.SphereGeometry(1, 64, 64);
            
            // Ã–nce basit mavi kÃ¼re gÃ¶ster
            var material = new THREE.MeshBasicMaterial({ color: 0x1a5276 });
            var globe = new THREE.Mesh(geometry, material);
            scene.add(globe);
            
            // Sonra gerÃ§ek texture yÃ¼kle
            var img = new Image();
            img.crossOrigin = 'Anonymous';
            img.onload = function() {
                var texture = new THREE.Texture(img);
                texture.needsUpdate = true;
                globe.material = new THREE.MeshBasicMaterial({ map: texture });
                console.log('âœ… GerÃ§ek dÃ¼nya yÃ¼klendi!');
            };
            img.onerror = function() {
                console.log('Texture yÃ¼klenemedi, alternatif deneniyor...');
                var img2 = new Image();
                img2.crossOrigin = 'Anonymous';
                img2.onload = function() {
                    var texture = new THREE.Texture(img2);
                    texture.needsUpdate = true;
                    globe.material = new THREE.MeshBasicMaterial({ map: texture });
                };
                img2.src = 'https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg';
            };
            img.src = 'https://unpkg.com/three-globe@2.24.13/example/img/earth-blue-marble.jpg';
            
            // Atmosfer
            var atmosGeo = new THREE.SphereGeometry(1.08, 64, 64);
            var atmosMat = new THREE.MeshBasicMaterial({ color: 0x00aaff, transparent: true, opacity: 0.1, side: THREE.BackSide });
            scene.add(new THREE.Mesh(atmosGeo, atmosMat));
            
            // YÄ±ldÄ±zlar
            var starsGeo = new THREE.BufferGeometry();
            var starPositions = [];
            for (var i = 0; i < 1000; i++) {
                starPositions.push((Math.random() - 0.5) * 80);
                starPositions.push((Math.random() - 0.5) * 80);
                starPositions.push((Math.random() - 0.5) * 80);
            }
            starsGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPositions, 3));
            var stars = new THREE.Points(starsGeo, new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 }));
            scene.add(stars);
            
            // Åehir koordinatlarÄ±
            var sehirKoordinatlari = {
                'Ä°stanbul': { lat: 41.01, lon: 28.95 },
                'Ankara': { lat: 39.93, lon: 32.86 },
                'Ä°zmir': { lat: 38.42, lon: 27.13 },
                'Bursa': { lat: 40.19, lon: 29.06 },
                'Antalya': { lat: 36.90, lon: 30.70 },
                'Adana': { lat: 37.00, lon: 35.32 },
                'Konya': { lat: 37.87, lon: 32.48 },
                'Gaziantep': { lat: 37.06, lon: 37.38 },
                'Mersin': { lat: 36.80, lon: 34.64 },
                'DiyarbakÄ±r': { lat: 37.91, lon: 40.24 },
                'Kayseri': { lat: 38.73, lon: 35.48 },
                'Samsun': { lat: 41.29, lon: 36.33 },
                'Trabzon': { lat: 41.00, lon: 39.72 },
                'Erzurum': { lat: 39.90, lon: 41.27 }
            };
            
            function latLonToVector3(lat, lon, radius) {
                var phi = (90 - lat) * (Math.PI / 180);
                var theta = (lon + 180) * (Math.PI / 180);
                return new THREE.Vector3(
                    -radius * Math.sin(phi) * Math.cos(theta),
                    radius * Math.cos(phi),
                    radius * Math.sin(phi) * Math.sin(theta)
                );
            }
            
            var cityPoints = new THREE.Group();
            var cityData = {};
            
            Object.keys(sehirKoordinatlari).forEach(function(sehir) {
                var koord = sehirKoordinatlari[sehir];
                var pos = latLonToVector3(koord.lat, koord.lon, 1.02);
                
                // Parlak nokta
                var dotGeo = new THREE.SphereGeometry(0.02, 16, 16);
                var dotMat = new THREE.MeshBasicMaterial({ color: 0xff3333 });
                var dot = new THREE.Mesh(dotGeo, dotMat);
                dot.position.copy(pos);
                dot.userData = { sehir: sehir, ziyaretci: 0 };
                cityPoints.add(dot);
                
                // Parlama halkasÄ±
                var ringGeo = new THREE.RingGeometry(0.025, 0.04, 32);
                var ringMat = new THREE.MeshBasicMaterial({ color: 0xff6666, transparent: true, opacity: 0.6, side: THREE.DoubleSide });
                var ring = new THREE.Mesh(ringGeo, ringMat);
                ring.position.copy(pos);
                ring.lookAt(0, 0, 0);
                ring.userData = { isRing: true, baseOpacity: 0.6 };
                cityPoints.add(ring);
                
                cityData[sehir] = { dot: dot, ring: ring, pos: pos };
            });
            
            globe.add(cityPoints);
            
            // ZiyaretÃ§i gÃ¼ncelleme
            window.updateCityVisitors = function(sehirVerileri) {
                var maxZ = 1;
                Object.values(sehirVerileri).forEach(function(s) { if (s > maxZ) maxZ = s; });
                Object.keys(cityData).forEach(function(sehir) {
                    var z = sehirVerileri[sehir] || 0;
                    var d = cityData[sehir];
                    d.dot.scale.setScalar(1 + (z / maxZ) * 2);
                    d.dot.userData.ziyaretci = z;
                });
            };
            
            // Yeni ziyaretÃ§i pulse
            window.newVisitorPulse = function(sehir) {
                var d = cityData[sehir];
                if (!d) return;
                var pulseGeo = new THREE.RingGeometry(0.01, 0.1, 32);
                var pulseMat = new THREE.MeshBasicMaterial({ color: 0x00ff88, transparent: true, opacity: 1, side: THREE.DoubleSide });
                var pulse = new THREE.Mesh(pulseGeo, pulseMat);
                pulse.position.copy(d.pos);
                pulse.lookAt(0, 0, 0);
                globe.add(pulse);
                var start = Date.now();
                function anim() {
                    var e = (Date.now() - start) / 1000;
                    if (e > 2) { globe.remove(pulse); return; }
                    pulse.scale.setScalar(1 + e * 3);
                    pulseMat.opacity = 1 - e / 2;
                    requestAnimationFrame(anim);
                }
                anim();
            };
            
            // Mouse kontrolÃ¼
            var isDragging = false;
            var previousMousePosition = { x: 0, y: 0 };
            var autoRotate = true;
            
            container.addEventListener('mousedown', function(e) {
                isDragging = true;
                autoRotate = false;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
            
            document.addEventListener('mouseup', function() {
                isDragging = false;
                setTimeout(function() { autoRotate = true; }, 3000);
            });
            
            document.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                var deltaX = e.clientX - previousMousePosition.x;
                var deltaY = e.clientY - previousMousePosition.y;
                globe.rotation.y += deltaX * 0.005;
                globe.rotation.x += deltaY * 0.005;
                globe.rotation.x = Math.max(-0.5, Math.min(0.5, globe.rotation.x));
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
            
            // TÄ±klama - ÅŸehir bilgisi
            var raycaster = new THREE.Raycaster();
            var mouse = new THREE.Vector2();
            container.addEventListener('click', function(e) {
                if (isDragging) return;
                var rect = container.getBoundingClientRect();
                mouse.x = ((e.clientX - rect.left) / 500) * 2 - 1;
                mouse.y = -((e.clientY - rect.top) / 500) * 2 + 1;
                raycaster.setFromCamera(mouse, camera);
                var intersects = raycaster.intersectObjects(cityPoints.children);
                if (intersects.length > 0 && intersects[0].object.userData.sehir) {
                    var s = intersects[0].object.userData.sehir;
                    var z = intersects[0].object.userData.ziyaretci || 0;
                    alert('ğŸ“ ' + s + '\nğŸ‘¥ ' + z + ' ziyaretÃ§i');
                }
            });
            
            // Animasyon
            var time = 0;
            function animate() {
                requestAnimationFrame(animate);
                time += 0.02;
                if (autoRotate) globe.rotation.y += 0.002;
                stars.rotation.y += 0.0002;
                cityPoints.children.forEach(function(c) {
                    if (c.userData.isRing) c.material.opacity = c.userData.baseOpacity + Math.sin(time * 3) * 0.3;
                });
                renderer.render(scene, camera);
            }
            animate();
            
            console.log('âœ… GerÃ§ek DÃ¼nya Globe yÃ¼klendi');
        } catch(e) {
            console.log('Globe hatasÄ±:', e);
        }
    }, 500);
});
</script>

<!-- AYLIK SATIÅ TAKVÄ°MÄ° -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ—“ï¸</span> AYLIK SATIÅ TAKVÄ°MÄ°
</div>
<div style="display:grid;grid-template-columns:repeat(7,1fr);gap:5px;text-align:center">
<div style="color:#888;font-size:12px;padding:5px">Pzt</div>
<div style="color:#888;font-size:12px;padding:5px">Sal</div>
<div style="color:#888;font-size:12px;padding:5px">Ã‡ar</div>
<div style="color:#888;font-size:12px;padding:5px">Per</div>
<div style="color:#888;font-size:12px;padding:5px">Cum</div>
<div style="color:#888;font-size:12px;padding:5px">Cmt</div>
<div style="color:#888;font-size:12px;padding:5px">Paz</div>
</div>
<div id="calendarDays" style="display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-top:10px">
</div>
</div>
<script>
// AylÄ±k SatÄ±ÅŸ Takvimi - Firebase'e baÄŸlÄ±
function aylikTakvimiBagla() {
  if(typeof database === 'undefined') { setTimeout(aylikTakvimiBagla, 500); return; }
  
  var simdi = new Date();
  var yil = simdi.getFullYear();
  var ay = simdi.getMonth();
  var bugun = simdi.getDate();
  
  // AyÄ±n ilk gÃ¼nÃ¼ hangi gÃ¼n
  var ilkGun = new Date(yil, ay, 1).getDay();
  if(ilkGun === 0) ilkGun = 7; // Pazar'Ä± 7 yap
  ilkGun--; // 0-indexed yap (Pazartesi=0)
  
  // AyÄ±n kaÃ§ gÃ¼n
  var ayinGunSayisi = new Date(yil, ay + 1, 0).getDate();
  
  database.ref('siparisler').once('value', function(snapshot) {
    var gunlukSatis = {};
    
    snapshot.forEach(function(child) {
      var siparis = child.val();
      if(siparis && siparis.tarih) {
        var parcalar = siparis.tarih.split('.');
        if(parcalar.length === 3) {
          var sGun = parseInt(parcalar[0]);
          var sAy = parseInt(parcalar[1]) - 1;
          var sYil = parseInt(parcalar[2]);
          if(sAy === ay && sYil === yil) {
            gunlukSatis[sGun] = (gunlukSatis[sGun] || 0) + 1;
          }
        }
      }
    });
    
    var container = document.getElementById('calendarDays');
    if(!container) return;
    container.innerHTML = '';
    
    // BoÅŸ gÃ¼nler (ayÄ±n baÅŸÄ±)
    for(var i=0; i<ilkGun; i++) {
      var bos = document.createElement('div');
      bos.style.cssText = 'padding:8px;';
      container.appendChild(bos);
    }
    
    // AyÄ±n gÃ¼nleri
    for(var gun=1; gun<=ayinGunSayisi; gun++) {
      var div = document.createElement('div');
      var satis = gunlukSatis[gun] || 0;
      var bugunMu = (gun === bugun);
      
      var bgColor = 'rgba(255,255,255,0.05)';
      if(satis > 0) bgColor = 'rgba(67,233,123,0.3)';
      if(satis >= 5) bgColor = 'rgba(67,233,123,0.5)';
      if(satis >= 10) bgColor = 'rgba(67,233,123,0.7)';
      if(bugunMu) bgColor = 'rgba(79,172,254,0.4)';
      
      div.style.cssText = 'padding:8px;background:'+bgColor+';border-radius:5px;font-size:12px;position:relative;'+(bugunMu?'border:2px solid #4facfe;':'');
      div.innerHTML = '<div style="font-weight:bold">'+gun+'</div>'+(satis>0?'<div style="font-size:9px;color:#43e97b">'+satis+'</div>':'');
      container.appendChild(div);
    }
  });
}
window.addEventListener('load', aylikTakvimiBagla);
</script>

<!-- MÃœÅTERÄ° YORUMLARI -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between">
<div style="display:flex;align-items:center;gap:10px">
<span>ğŸ’¬</span> MÃœÅTERÄ° MEMNUNÄ°YETÄ°
</div>
<div style="display:flex;align-items:center;gap:5px">
<span style="color:#ffc107">â˜…â˜…â˜…â˜…â˜…</span>
<span id="avgRating" style="font-weight:bold">5.0</span>
</div>
</div>
<div id="customerReviews" style="max-height:200px;overflow-y:auto">
<div style="padding:15px;background:rgba(255,255,255,0.05);border-radius:10px;margin-bottom:10px">
<div style="display:flex;justify-content:space-between;margin-bottom:8px">
<span style="font-weight:bold">ğŸ‘¤ MÃ¼ÅŸteri</span>
<span style="color:#ffc107">â˜…â˜…â˜…â˜…â˜…</span>
</div>
<div style="color:#888;font-size:13px">"HenÃ¼z yorum yok"</div>
</div>
</div>
</div>

<!-- TRAFÄ°K KAYNAKLARI -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ”</span> TRAFÄ°K KAYNAKLARI
</div>
<div style="display:flex;flex-direction:column;gap:12px">
<div style="display:flex;align-items:center;gap:15px">
<span style="font-size:24px">ğŸ”</span>
<div style="flex:1">
<div style="display:flex;justify-content:space-between;margin-bottom:5px">
<span>Google</span><span id="googleTraffic">0%</span>
</div>
<div style="background:#333;border-radius:5px;height:8px;overflow:hidden">
<div id="googleBar" style="background:#4285f4;height:100%;width:0%"></div>
</div>
</div>
</div>
<div style="display:flex;align-items:center;gap:15px">
<span style="font-size:24px">ğŸ“¸</span>
<div style="flex:1">
<div style="display:flex;justify-content:space-between;margin-bottom:5px">
<span>Instagram</span><span id="instaTraffic">0%</span>
</div>
<div style="background:#333;border-radius:5px;height:8px;overflow:hidden">
<div id="instaBar" style="background:linear-gradient(90deg,#833ab4,#fd1d1d,#fcb045);height:100%;width:0%"></div>
</div>
</div>
</div>
<div style="display:flex;align-items:center;gap:15px">
<span style="font-size:24px">ğŸµ</span>
<div style="flex:1">
<div style="display:flex;justify-content:space-between;margin-bottom:5px">
<span>TikTok</span><span id="tiktokTraffic">0%</span>
</div>
<div style="background:#333;border-radius:5px;height:8px;overflow:hidden">
<div id="tiktokBar" style="background:#000;height:100%;width:0%"></div>
</div>
</div>
</div>
<div style="display:flex;align-items:center;gap:15px">
<span style="font-size:24px">ğŸ”—</span>
<div style="flex:1">
<div style="display:flex;justify-content:space-between;margin-bottom:5px">
<span>Direkt</span><span id="directTraffic">0%</span>
</div>
<div style="background:#333;border-radius:5px;height:8px;overflow:hidden">
<div id="directBar" style="background:#43e97b;height:100%;width:0%"></div>
</div>
</div>
</div>
</div>
</div>

<!-- SOSYAL MEDYA -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ“±</span> SOSYAL MEDYA
</div>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px">
<div style="text-align:center;background:linear-gradient(135deg,#833ab4,#fd1d1d,#fcb045);padding:20px;border-radius:10px;cursor:pointer" onclick="sosyalMedyaDuzenle('instagram')">
<div style="font-size:30px">ğŸ“¸</div>
<div style="font-size:20px;font-weight:bold" id="instaFollowers">0</div>
<div style="font-size:11px;opacity:0.8">TakipÃ§i</div>
</div>
<div style="text-align:center;background:#000;padding:20px;border-radius:10px;border:1px solid #333;cursor:pointer" onclick="sosyalMedyaDuzenle('tiktok')">
<div style="font-size:30px">ğŸµ</div>
<div style="font-size:20px;font-weight:bold" id="tiktokFollowers">0</div>
<div style="font-size:11px;opacity:0.8">TakipÃ§i</div>
</div>
<div style="text-align:center;background:#25D366;padding:20px;border-radius:10px;cursor:pointer" onclick="sosyalMedyaDuzenle('whatsapp')">
<div style="font-size:30px">ğŸ’¬</div>
<div style="font-size:20px;font-weight:bold" id="whatsappMsgs">0</div>
<div style="font-size:11px;opacity:0.8">Mesaj</div>
</div>
</div>
</div>
<script>
// Sosyal Medya - Firebase'e baÄŸlÄ±
function sosyalMedyaBagla() {
  if(typeof database === 'undefined') { setTimeout(sosyalMedyaBagla, 500); return; }
  
  database.ref('sosyalMedya').on('value', function(snapshot) {
    var data = snapshot.val() || {};
    var instaEl = document.getElementById('instaFollowers');
    var tiktokEl = document.getElementById('tiktokFollowers');
    var whatsappEl = document.getElementById('whatsappMsgs');
    
    if(instaEl) instaEl.textContent = (data.instagram || 0).toLocaleString('tr-TR');
    if(tiktokEl) tiktokEl.textContent = (data.tiktok || 0).toLocaleString('tr-TR');
    if(whatsappEl) whatsappEl.textContent = (data.whatsapp || 0).toLocaleString('tr-TR');
  });
}
function sosyalMedyaDuzenle(platform) {
  var mevcutDeger = document.getElementById(platform === 'instagram' ? 'instaFollowers' : (platform === 'tiktok' ? 'tiktokFollowers' : 'whatsappMsgs')).textContent;
  var yeniDeger = prompt(platform.toUpperCase() + ' sayÄ±sÄ±nÄ± girin:', mevcutDeger.replace(/\./g,''));
  if(yeniDeger !== null && !isNaN(yeniDeger)) {
    database.ref('sosyalMedya/' + platform).set(parseInt(yeniDeger));
  }
}
window.addEventListener('load', sosyalMedyaBagla);
</script>

<!-- STOK DURUMU -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ·ï¸</span> STOK DURUMU
</div>
<div id="stockStatus" style="max-height:250px;overflow-y:auto">
</div>
</div>
<script>
// Stok Durumu - Firebase'e baÄŸlÄ±
function stokDurumunuBagla() {
  if(typeof database === 'undefined') { setTimeout(stokDurumunuBagla, 500); return; }
  
  database.ref('forumStoklar').on('value', function(snapshot) {
    var stoklar = snapshot.val() || {};
    var container = document.getElementById('stockStatus');
    if(!container) return;
    
    var html = '';
    for(var i=1; i<=10; i++) {
      var stok = stoklar['forum'+i] || 0;
      var durum, renk, ikon;
      
      if(stok <= 0) {
        durum = 'TÃ¼kendi'; renk = '#dc3545'; ikon = 'âŒ';
      } else if(stok <= 5) {
        durum = 'Az KaldÄ± ('+stok+')'; renk = '#ffc107'; ikon = 'âš ï¸';
      } else {
        durum = 'Stokta ('+stok+')'; renk = '#28a745'; ikon = 'âœ“';
      }
      
      var bgOpacity = stok <= 0 ? '0.15' : (stok <= 5 ? '0.1' : '0.1');
      html += '<div style="display:flex;justify-content:space-between;align-items:center;padding:12px;background:rgba('+hexToRgb(renk)+','+bgOpacity+');border-radius:8px;margin-bottom:8px;border-left:4px solid '+renk+'"><span>ÃœrÃ¼n '+i+'</span><span style="color:'+renk+';font-weight:bold">'+ikon+' '+durum+'</span></div>';
    }
    container.innerHTML = html;
  });
}
function hexToRgb(hex) {
  if(hex.charAt(0) === '#') hex = hex.substr(1);
  if(hex.length === 3) hex = hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2];
  var r = parseInt(hex.substr(0,2),16), g = parseInt(hex.substr(2,2),16), b = parseInt(hex.substr(4,2),16);
  return r+','+g+','+b;
}
window.addEventListener('load', stokDurumunuBagla);
</script>

<!-- EN YOÄUN SAATLER -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>â°</span> EN YOÄUN SAATLER
</div>
<div id="hourlyChart" style="display:flex;align-items:flex-end;justify-content:space-between;height:100px;padding:10px 0">
</div>
<div id="peakHourText" style="text-align:center;margin-top:10px;color:#fa709a;font-size:13px">ğŸ”¥ En yoÄŸun saat: <strong>--:00</strong></div>
</div>
<script>
// En YoÄŸun Saatler - Firebase'e baÄŸlÄ±
function saatlikGrafigiBagla() {
  if(typeof database === 'undefined') { setTimeout(saatlikGrafigiBagla, 500); return; }
  
  var saatler = [0,3,6,9,12,15,18,21]; // 3 saatlik dilimler
  var saatlikAktivite = {};
  saatler.forEach(function(s){ saatlikAktivite[s] = 0; });
  
  // ZiyaretÃ§ilerden saat bilgisi al
  database.ref('ziyaretciler').once('value', function(snapshot) {
    snapshot.forEach(function(child) {
      var data = child.val();
      if(data && data.timestamp) {
        var saat = new Date(data.timestamp).getHours();
        var dilim = Math.floor(saat / 3) * 3; // 0,3,6,9,12,15,18,21
        saatlikAktivite[dilim] = (saatlikAktivite[dilim] || 0) + 1;
      }
    });
    
    // SipariÅŸlerden de ekle
    database.ref('siparisler').once('value', function(sipSnap) {
      sipSnap.forEach(function(child) {
        var data = child.val();
        if(data && data.timestamp) {
          var saat = new Date(data.timestamp).getHours();
          var dilim = Math.floor(saat / 3) * 3;
          saatlikAktivite[dilim] = (saatlikAktivite[dilim] || 0) + 2; // SipariÅŸ 2 puan
        }
      });
      
      // GrafiÄŸi Ã§iz
      var container = document.getElementById('hourlyChart');
      if(!container) return;
      container.innerHTML = '';
      
      var maxAktivite = Math.max.apply(null, Object.values(saatlikAktivite)) || 1;
      var enYogunSaat = 0, enYogunDeger = 0;
      
      saatler.forEach(function(saat) {
        var aktivite = saatlikAktivite[saat] || 0;
        if(aktivite > enYogunDeger) { enYogunDeger = aktivite; enYogunSaat = saat; }
        
        var yuzde = (aktivite / maxAktivite) * 100;
        var yukseklik = Math.max(10, yuzde);
        var enYogunMu = (aktivite === maxAktivite && aktivite > 0);
        var renk = enYogunMu ? 'rgba(250,112,154,1)' : 'rgba(79,172,254,0.5)';
        
        var div = document.createElement('div');
        div.style.cssText = 'text-align:center;flex:1';
        div.innerHTML = '<div style="background:'+renk+';height:'+yukseklik+'px;border-radius:3px 3px 0 0;margin:0 2px"></div><div style="font-size:9px;color:#888;margin-top:3px">'+saat.toString().padStart(2,'0')+'</div>';
        container.appendChild(div);
      });
      
      var peakText = document.getElementById('peakHourText');
      if(peakText) peakText.innerHTML = 'ğŸ”¥ En yoÄŸun saat: <strong>'+enYogunSaat.toString().padStart(2,'0')+':00</strong>';
    });
  });
}
window.addEventListener('load', saatlikGrafigiBagla);
</script>

<!-- ÃœRÃœN SAYFALARI YÃ–NETÄ°MÄ° -->
<div style="margin-top:25px;background:rgba(0,0,0,0.4);border:1px solid #333;border-radius:15px;padding:20px">
<div style="font-size:18px;font-weight:bold;margin-bottom:20px;display:flex;align-items:center;gap:10px">
<span>ğŸ›ï¸</span> ÃœRÃœN SAYFALARI YÃ–NETÄ°MÄ°
</div>
<div style="font-size:12px;color:#888;margin-bottom:15px;padding:10px;background:rgba(255,193,7,0.1);border-radius:8px;border-left:4px solid #ffc107">
ğŸ‘ï¸ MÃ¼ÅŸteri gÃ¶zÃ¼yle test et | ğŸ”´ KAPALI = MÃ¼ÅŸteri admin gÃ¶rmez | ğŸŸ¢ AÃ‡IK = MÃ¼ÅŸteri admin gÃ¶rÃ¼r
</div>
<div style="display:grid;grid-template-columns:repeat(5,1fr);gap:10px" id="urunSayfaYonetim">
</div>
<script>
function urunSayfaYonetimYukle(){
var container = document.getElementById('urunSayfaYonetim');
var html = '';
for(var i=1; i<=10; i++){
var durum = localStorage.getItem('urun_sayfa_admin_'+i);
var kapali = durum === 'kapali';
html += '<div style="background:'+(kapali?'rgba(220,53,69,0.15)':'rgba(40,167,69,0.15)')+';border:1px solid '+(kapali?'#dc3545':'#28a745')+';border-radius:10px;padding:12px;text-align:center">';
html += '<div style="font-weight:bold;font-size:14px;color:#fff;margin-bottom:8px">ÃœRÃœN '+i+'</div>';
html += '<div style="display:flex;gap:6px;justify-content:center">';
html += '<button onclick="musteriOnizle('+i+')" style="background:#4facfe;color:#fff;border:none;width:36px;height:36px;border-radius:8px;cursor:pointer;font-size:16px" title="MÃ¼ÅŸteri gÃ¶zÃ¼yle bak">ğŸ‘ï¸</button>';
html += '<button onclick="urunSayfaToggle('+i+')" style="background:'+(kapali?'#dc3545':'#28a745')+';color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:bold;font-size:11px">'+(kapali?'KAPALI':'AÃ‡IK')+'</button>';
html += '</div></div>';
}
container.innerHTML = html;
}
function urunSayfaToggle(num){
var durum = localStorage.getItem('urun_sayfa_admin_'+num);
if(durum === 'kapali'){
localStorage.setItem('urun_sayfa_admin_'+num, 'acik');
}else{
localStorage.setItem('urun_sayfa_admin_'+num, 'kapali');
}
urunSayfaYonetimYukle();
}
function musteriOnizle(num){
window.open('urun-'+num+'.html?test=1', '_blank');
}
urunSayfaYonetimYukle();
</script>
</div>
</div>

</div>
<!-- SARAY DASHBOARD SON -->
</div>

<!-- GARÄ°BAN WIDGET - AkÄ±llÄ± Asistan -->
<script src="ramco-beyin.js"></script>
<script src="ramco-widget.js"></script>

<!-- KULLANIM KILAVUZU - TELEFON ÅEKLÄ°NDE -->
<div id="kilavuzOverlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:99999;justify-content:center;align-items:center">
<div id="telefonKilavuz" style="width:260px;height:450px;background:linear-gradient(180deg,#1a1a2e,#16213e);border-radius:30px;position:relative;box-shadow:0 0 60px rgba(233,69,96,0.3),inset 0 0 20px rgba(0,0,0,0.5);border:3px solid #333;overflow:hidden">
<div style="position:absolute;top:10px;left:50%;transform:translateX(-50%);width:120px;height:25px;background:#000;border-radius:15px;display:flex;align-items:center;justify-content:center;gap:10px">
<div style="width:8px;height:8px;background:#333;border-radius:50%"></div>
<div style="width:50px;height:5px;background:#333;border-radius:3px"></div>
</div>
<button onclick="kilavuzKapat()" style="position:absolute;top:15px;right:15px;background:rgba(220,53,69,0.8);border:none;color:#fff;width:35px;height:35px;border-radius:50%;cursor:pointer;font-size:18px;z-index:10">âœ•</button>
<div style="padding:45px 15px 120px;height:100%;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none">
<div style="text-align:center;margin-bottom:25px;padding-bottom:20px;border-bottom:2px solid rgba(233,69,96,0.3)">
<div style="font-size:50px;margin-bottom:10px">ğŸ“–</div>
<h1 style="color:#e94560;font-size:22px;margin:0;text-shadow:0 0 20px rgba(233,69,96,0.5)">KULLANIM KILAVUZU</h1>
<p style="color:#888;font-size:12px;margin-top:8px">E-Ticaret YÃ¶netim Sistemi</p>
</div>
<div style="background:linear-gradient(135deg,rgba(233,69,96,0.2),rgba(15,52,96,0.2));border:1px solid rgba(233,69,96,0.3);border-radius:15px;padding:15px;margin-bottom:20px;text-align:center">
<div style="font-size:14px;color:#888;margin-bottom:5px">ğŸ‘‘ Kurucu</div>
<div style="font-size:20px;font-weight:bold;color:#fff">RAMADAN ÅEFTALÄ°</div>
</div>
<div style="color:#fff">
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #e94560">
<h3 style="color:#e94560;margin:0 0 10px;font-size:16px">ğŸš€ GÄ°RÄ°Å</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0">Bu sistem e-ticaret sitenizi yÃ¶netmeniz iÃ§in tasarlandÄ±. TÃ¼m satÄ±ÅŸlar, sipariÅŸler ve mÃ¼ÅŸteri bilgileri tek panelden kontrol edilir.</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #4facfe">
<h3 style="color:#4facfe;margin:0 0 10px;font-size:16px">ğŸ” ADMÄ°N GÄ°RÄ°ÅÄ°</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0"><strong>URL:</strong> /admin.html<br><strong>Åifre:</strong> BelirlediÄŸiniz ÅŸifre<br>GiriÅŸ yaptÄ±ktan sonra hoÅŸ geldin ekranÄ± aÃ§Ä±lÄ±r.</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #43e97b">
<h3 style="color:#43e97b;margin:0 0 10px;font-size:16px">ğŸ“‚ ÃœST Ã‡EKMECE</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0">SaÄŸ Ã¼stteki <strong>â†“</strong> butonuna tÄ±klayÄ±n. Ä°Ã§inde:<br>â€¢ TikTok/Meta Pixel ayarlarÄ±<br>â€¢ Domain baÄŸlama<br>â€¢ Muhasebe & Fatura<br>â€¢ Kargo gÃ¶nderme<br>â€¢ SipariÅŸ takibi<br>â€¢ Otomasyon<br>â€¢ Yapay Zeka (GARÄ°BAN)</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #f093fb">
<h3 style="color:#f093fb;margin:0 0 10px;font-size:16px">ğŸ”— URL Ã‡EKMECESÄ°</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0"><strong>URL</strong> butonuna tÄ±klayÄ±n. 10 Ã¼rÃ¼n sayfasÄ±nÄ±n linklerini kopyalayabilirsiniz. Reklamlarda bu linkleri kullanÄ±n.</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #ffc107">
<h3 style="color:#ffc107;margin:0 0 10px;font-size:16px">ğŸ”’ SAYFA KONTROLÃœ</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0">Ãœst Ã§ekmecede her Ã¼rÃ¼n iÃ§in AÃ‡/KAPAT toggle'Ä± var. KapalÄ± sayfaya mÃ¼ÅŸteri giremez, "Sayfa KullanÄ±lamÄ±yor" mesajÄ± gÃ¶rÃ¼r.</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #00f2fe">
<h3 style="color:#00f2fe;margin:0 0 10px;font-size:16px">ğŸ“Š DASHBOARD</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0">Ana sayfada tÃ¼m istatistikler:<br>â€¢ CanlÄ± ziyaretÃ§i sayÄ±sÄ±<br>â€¢ BugÃ¼n/Toplam sipariÅŸ<br>â€¢ Ciro ve dÃ¶nÃ¼ÅŸÃ¼m oranÄ±<br>â€¢ Cihaz daÄŸÄ±lÄ±mÄ±<br>â€¢ Åehir bazlÄ± veriler<br>â€¢ HaftalÄ±k satÄ±ÅŸ grafiÄŸi</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #e94560">
<h3 style="color:#e94560;margin:0 0 10px;font-size:16px">ğŸ¤– GARÄ°BAN (Yapay Zeka)</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0">SaÄŸ alttaki kÄ±rmÄ±zÄ± yÃ¼ze tÄ±klayÄ±n. Sesli veya yazÄ±lÄ± komut verin. Analiz, Ã¶zet, motivasyon ve daha fazlasÄ±!</p>
</div>
<div style="margin-bottom:20px;background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;border-left:4px solid #9b59b6">
<h3 style="color:#9b59b6;margin:0 0 10px;font-size:16px">âŒ¨ï¸ KISAYOLLAR</h3>
<p style="color:#aaa;font-size:13px;line-height:1.6;margin:0"><strong>Ctrl</strong> = Bu kÄ±lavuzu aÃ§/kapat<br><strong>Esc</strong> = KÄ±lavuzu kapat</p>
</div>
<div style="margin-bottom:20px;background:linear-gradient(135deg,rgba(233,69,96,0.1),rgba(155,89,182,0.1));border-radius:12px;padding:15px;text-align:center;border:1px solid rgba(233,69,96,0.2)">
<div style="font-size:12px;color:#888;margin-bottom:5px">Destek & Ä°letiÅŸim</div>
<div style="font-size:14px;color:#e94560;font-weight:bold">RAMADAN ÅEFTALÄ°</div>
<div style="font-size:11px;color:#666;margin-top:5px">Â© 2026 TÃ¼m HaklarÄ± SaklÄ±dÄ±r</div>
</div>
</div>
</div>
<div style="position:absolute;bottom:8px;left:50%;transform:translateX(-50%);width:100px;height:4px;background:#444;border-radius:2px"></div>
</div>
</div>

<script>
function kilavuzAc() {
  document.getElementById('kilavuzOverlay').style.display = 'flex';
}
function kilavuzKapat() {
  document.getElementById('kilavuzOverlay').style.display = 'none';
}
document.addEventListener('keydown', function(e) {
  if (e.key === 'Control') {
    var kilavuz = document.getElementById('kilavuzOverlay');
    if (kilavuz.style.display === 'flex') {
      kilavuzKapat();
    } else {
      kilavuzAc();
    }
  }
  if (e.key === 'Escape') {
    kilavuzKapat();
  }
});
</script>
</body>
</html>